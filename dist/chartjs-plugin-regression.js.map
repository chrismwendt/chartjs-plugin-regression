{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./lib/MetaData.js","webpack:///./lib/MetaSection.js","webpack:///./lib/index.js","webpack:///./lib/types.js","webpack:///./node_modules/regression/dist/regression.js","webpack:///./lib/regression-plugin.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","MetaDataSet","MetaSection_1","chart","ds","_this","this","getXY","undefined","cfg","regressions","dataset","sections","startIndex","endIndex","data","length","map","MetaSection","points","v","forEach","section","calculate","adjustScales","topY","xScale","yScale","scales","keys","k","top","bottomY","bottom","index","y","x","getPixelForValue","draw","ctx","me","save","extendPredictions","setLineDash","_loop_1","beginPath","_setLineAttrs","line","lineWidth","fn","result","predict","calcXY","moveTo","j","lineTo","stroke","_drawPredictions","drawRegression","drawVerticalLine","restore","width","color","strokeStyle","regression","defaultConfig","type","calculation","precision","order","dash","sec","_meta","copySectionIndex","fields","globalConfig","config","options","plugins","configMerge","cfgList","_i","arguments","dstConfig","f","srcConfig","Array","isArray","assign","copyOverData","includes","Error","validate","meta","sectionData","slice","reduce","max","r2","from_1","r_1","overwrite_1","data_1","_a","fillText","labels","__createBinding","k2","__exportStar","_extends","target","source","_toConsumableArray","arr","arr2","from","DEFAULT_OPTIONS","period","determinationCoefficient","results","predictions","observations","push","mean","a","observation","ssyy","difference","accum","prediction","residual","round","number","factor","Math","pow","methods","linear","sum","len","run","rise","gradient","intercept","point","equation","string","exponential","log","denominator","exp","b","coeffA","coeffB","logarithmic","power","polynomial","lhs","rhs","_l","coefficients","input","matrix","maxrow","abs","tmp","_j","_k","_j2","total","_k2","gaussianElimination","coeff","concat","reverse","accumulator","_round","supplied","obj","configurable","writable","ChartRegressions","MetaData_1","Plugin","id","_chartId","_metadataMap","Map","beforeInit","$$id","beforeUpdate","onComplete","onCompleteCalculation","datasetIndex","set","beforeRender","afterDatasetsDraw","destroy","filter","delete","getDataset","getSections","datasets","isDatasetVisible","window"],"mappings":"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","file":"chartjs-plugin-regression.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MetaDataSet = void 0;\nvar MetaSection_1 = require(\"./MetaSection\");\nvar MetaDataSet = /** @class */ (function () {\n    function MetaDataSet(chart, ds) {\n        var _this = this;\n        /** Scales wil be initialized in beforeDraw hook */\n        this.getXY = undefined;\n        var cfg = ds.regressions;\n        var me = this;\n        this.chart = chart;\n        this.dataset = ds;\n        this.sections = (cfg.sections || [{ startIndex: 0, endIndex: ds.data.length - 1 }])\n            .map(function (s) { return new MetaSection_1.MetaSection(s, _this); });\n        this.points = ds.data.map(function (v, i) { return [i, !i ? null : !v ? null : v]; });\n        me.sections.forEach(function (section) { return section.calculate(ds, _this); }); // Calculate Section Results\n    }\n    MetaDataSet.prototype.adjustScales = function () {\n        if (this.topY !== undefined)\n            return;\n        var xScale;\n        var yScale;\n        var scales = this.chart.scales;\n        Object.keys(scales).forEach(function (k) { return k[0] == 'x' && (xScale = scales[k]) || (yScale = scales[k]); });\n        this.topY = yScale.top;\n        this.bottomY = yScale.bottom;\n        this.getXY =\n            function (index, y) {\n                return ({\n                    x: xScale.getPixelForValue(undefined, index, undefined, true),\n                    y: yScale.getPixelForValue(y)\n                });\n            };\n    };\n    MetaDataSet.prototype.draw = function () {\n        var ctx = this.chart.chart.ctx;\n        var me = this;\n        ctx.save();\n        try {\n            if (this.dataset.regressions.extendPredictions)\n                _drawPredictions();\n            for (var i = 0; i < this.sections.length; i++) {\n                var section = this.sections[i];\n                section.drawRegression(ctx);\n                if (i < this.sections.length - 1)\n                    section.drawVerticalLine(ctx);\n            }\n        }\n        finally {\n            ctx.restore();\n        }\n        return;\n        /**\n         * Draws the previous sections predictions as a dashed thin line\n         */\n        function _drawPredictions() {\n            ctx.setLineDash([5, 5]);\n            for (var i = 1; i < me.sections.length; i++) {\n                var section = me.sections[i];\n                var _loop_1 = function (r) {\n                    ctx.beginPath();\n                    _setLineAttrs(me.sections[r].line);\n                    ctx.lineWidth = 1; // overrides the width to a thin line\n                    var fn = me.sections[r].result.predict;\n                    var calcXY = function (index) { return me.getXY(index, fn(index)[1]); };\n                    var p = calcXY(section.startIndex);\n                    ctx.moveTo(p.x, p.y);\n                    for (var j = section.startIndex + 1; j < section.endIndex + 1; j++) {\n                        p = calcXY(j);\n                        ctx.lineTo(p.x, p.y);\n                    }\n                    ctx.stroke();\n                };\n                for (var r = 0; r < i; r++) {\n                    _loop_1(r);\n                }\n            }\n        }\n        function _setLineAttrs(line) {\n            if (line.width)\n                ctx.lineWidth = line.width;\n            if (line.color)\n                ctx.strokeStyle = line.color;\n        }\n    };\n    return MetaDataSet;\n}());\nexports.MetaDataSet = MetaDataSet;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MetaSection = void 0;\nvar regression = require(\"regression\");\nvar defaultConfig = {\n    type: \"linear\",\n    calculation: {\n        precision: 2,\n        order: 2\n    },\n    line: {\n        width: 2,\n        color: '#000',\n        dash: []\n    },\n    extendPredictions: false\n};\nvar MetaSection = /** @class */ (function () {\n    function MetaSection(sec, _meta) {\n        this._meta = _meta;\n        var chart = _meta.chart;\n        var ds = _meta.dataset;\n        // Copying from user config\n        this.copySectionIndex = sec.copySectionIndex;\n        // Calculate inherited configuration\n        var cfg = getConfig(['type', 'calculation', 'line', 'extendPredictions', 'copyOverData']);\n        this.startIndex = sec.startIndex || 0;\n        this.endIndex = sec.endIndex || ds.data.length - 1;\n        this.type = Array.isArray(cfg.type) ? cfg.type : [cfg.type];\n        this.line = cfg.line;\n        this.calculation = cfg.calculation;\n        this.extendPredictions = cfg.extendPredictions;\n        this.copyOverData = cfg.copyOverData;\n        validate(this.type);\n        // --- constructor helpers\n        function getConfig(fields) {\n            var o, p;\n            var globalConfig = (o = chart.config.options) && (p = o.plugins) && p.regressions || {};\n            return configMerge(fields, defaultConfig, globalConfig, ds.regressions, sec);\n        }\n        function configMerge(fields) {\n            var cfgList = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                cfgList[_i - 1] = arguments[_i];\n            }\n            var dstConfig = {};\n            fields.forEach(function (f) {\n                cfgList.forEach(function (srcConfig) {\n                    var o = srcConfig[f];\n                    var t = typeof o;\n                    if (t != 'undefined') {\n                        if (Array.isArray(o) || t != 'object' || o == null)\n                            dstConfig[f] = o;\n                        else\n                            dstConfig[f] = Object.assign({}, dstConfig[f], configMerge(Object.keys(o), o));\n                    }\n                });\n            });\n            return dstConfig;\n        }\n        function validate(type) {\n            if (type.length > 1 && type.includes('copy'))\n                throw Error('Invalid regression type:' + cfg.type + '. \"none\" cannot be combined with other type!');\n        }\n    }\n    MetaSection.prototype.calculate = function (ds, meta) {\n        var _this = this;\n        var sectionData = meta.points.slice(this.startIndex, this.endIndex + 1);\n        if (this.type[0] != 'copy') {\n            this.result = this.type.reduce(function (max, type) {\n                var r = regression[type](sectionData, _this.calculation);\n                r.type = type;\n                return (!max || max.r2 < r.r2) ? r : max;\n            }, null);\n        }\n        else if (this.copySectionIndex) {\n            var from_1 = meta.sections[this.copySectionIndex], r_1 = this.result = Object.assign({}, from_1.result), overwrite_1 = this.copyOverData, data_1 = ds.data;\n            r_1.points = sectionData.map(function (p) { return r_1.predict(p[0]); });\n            delete r_1.r2;\n            if (overwrite_1 != 'none')\n                r_1.points.forEach(function (_a) {\n                    var index = _a[0], value = _a[1];\n                    if ((index < from_1.startIndex || index > from_1.endIndex) &&\n                        (overwrite_1 == 'all' ||\n                            overwrite_1 == 'last' && index == _this.endIndex ||\n                            overwrite_1 == 'empty' && !data_1[index]))\n                        data_1[index] = value;\n                });\n        }\n    };\n    MetaSection.prototype.drawVerticalLine = function (ctx) {\n        ctx.beginPath();\n        this._setLineAttrs(ctx);\n        ctx.setLineDash([10, 2]);\n        ctx.lineWidth = 2;\n        // Print vertical line\n        var p = this._meta.getXY(this.endIndex, 0);\n        ctx.moveTo(p.x, this._meta.topY);\n        ctx.lineTo(p.x, this._meta.bottomY);\n        // ctx.fillText(xScale.getLabelForIndex(this.end), p.x, yScale.top);\n        ctx.fillText(this._meta.chart.data.labels[this.endIndex], p.x, this._meta.topY);\n        ctx.stroke();\n    };\n    MetaSection.prototype.drawRegression = function (ctx) {\n        ctx.beginPath();\n        this._setLineAttrs(ctx);\n        var points = this.result.points;\n        if (!points.length)\n            return;\n        var p = this._meta.getXY(this.startIndex, points[0][1]);\n        ctx.moveTo(p.x, p.y);\n        for (var k = 1, j = this.startIndex + 1; j <= this.endIndex; j++, k++) {\n            // const y = this.result!.predict(j)[1];\n            var y = (k < points.length ? points[k] : this.result.predict(j))[1];\n            p = this._meta.getXY(j, y);\n            ctx.lineTo(p.x, p.y);\n        }\n        ctx.stroke();\n    };\n    MetaSection.prototype._setLineAttrs = function (ctx) {\n        if (this.line.width)\n            ctx.lineWidth = this.line.width;\n        if (this.line.color)\n            ctx.strokeStyle = this.line.color;\n        if (this.line.dash)\n            ctx.setLineDash(this.line.dash);\n    };\n    return MetaSection;\n}());\nexports.MetaSection = MetaSection;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./types\"), exports);\n__exportStar(require(\"./MetaData\"), exports);\n__exportStar(require(\"./MetaSection\"), exports);\n__exportStar(require(\"./regression-plugin\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define(['module'], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(module);\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod);\n    global.regression = mod.exports;\n  }\n})(this, function (module) {\n  'use strict';\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  var _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  function _toConsumableArray(arr) {\n    if (Array.isArray(arr)) {\n      for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n        arr2[i] = arr[i];\n      }\n\n      return arr2;\n    } else {\n      return Array.from(arr);\n    }\n  }\n\n  var DEFAULT_OPTIONS = { order: 2, precision: 2, period: null };\n\n  /**\n  * Determine the coefficient of determination (r^2) of a fit from the observations\n  * and predictions.\n  *\n  * @param {Array<Array<number>>} data - Pairs of observed x-y values\n  * @param {Array<Array<number>>} results - Pairs of observed predicted x-y values\n  *\n  * @return {number} - The r^2 value, or NaN if one cannot be calculated.\n  */\n  function determinationCoefficient(data, results) {\n    var predictions = [];\n    var observations = [];\n\n    data.forEach(function (d, i) {\n      if (d[1] !== null) {\n        observations.push(d);\n        predictions.push(results[i]);\n      }\n    });\n\n    var sum = observations.reduce(function (a, observation) {\n      return a + observation[1];\n    }, 0);\n    var mean = sum / observations.length;\n\n    var ssyy = observations.reduce(function (a, observation) {\n      var difference = observation[1] - mean;\n      return a + difference * difference;\n    }, 0);\n\n    var sse = observations.reduce(function (accum, observation, index) {\n      var prediction = predictions[index];\n      var residual = observation[1] - prediction[1];\n      return accum + residual * residual;\n    }, 0);\n\n    return 1 - sse / ssyy;\n  }\n\n  /**\n  * Determine the solution of a system of linear equations A * x = b using\n  * Gaussian elimination.\n  *\n  * @param {Array<Array<number>>} input - A 2-d matrix of data in row-major form [ A | b ]\n  * @param {number} order - How many degrees to solve for\n  *\n  * @return {Array<number>} - Vector of normalized solution coefficients matrix (x)\n  */\n  function gaussianElimination(input, order) {\n    var matrix = input;\n    var n = input.length - 1;\n    var coefficients = [order];\n\n    for (var i = 0; i < n; i++) {\n      var maxrow = i;\n      for (var j = i + 1; j < n; j++) {\n        if (Math.abs(matrix[i][j]) > Math.abs(matrix[i][maxrow])) {\n          maxrow = j;\n        }\n      }\n\n      for (var k = i; k < n + 1; k++) {\n        var tmp = matrix[k][i];\n        matrix[k][i] = matrix[k][maxrow];\n        matrix[k][maxrow] = tmp;\n      }\n\n      for (var _j = i + 1; _j < n; _j++) {\n        for (var _k = n; _k >= i; _k--) {\n          matrix[_k][_j] -= matrix[_k][i] * matrix[i][_j] / matrix[i][i];\n        }\n      }\n    }\n\n    for (var _j2 = n - 1; _j2 >= 0; _j2--) {\n      var total = 0;\n      for (var _k2 = _j2 + 1; _k2 < n; _k2++) {\n        total += matrix[_k2][_j2] * coefficients[_k2];\n      }\n\n      coefficients[_j2] = (matrix[n][_j2] - total) / matrix[_j2][_j2];\n    }\n\n    return coefficients;\n  }\n\n  /**\n  * Round a number to a precision, specificed in number of decimal places\n  *\n  * @param {number} number - The number to round\n  * @param {number} precision - The number of decimal places to round to:\n  *                             > 0 means decimals, < 0 means powers of 10\n  *\n  *\n  * @return {numbr} - The number, rounded\n  */\n  function round(number, precision) {\n    var factor = Math.pow(10, precision);\n    return Math.round(number * factor) / factor;\n  }\n\n  /**\n  * The set of all fitting methods\n  *\n  * @namespace\n  */\n  var methods = {\n    linear: function linear(data, options) {\n      var sum = [0, 0, 0, 0, 0];\n      var len = 0;\n\n      for (var n = 0; n < data.length; n++) {\n        if (data[n][1] !== null) {\n          len++;\n          sum[0] += data[n][0];\n          sum[1] += data[n][1];\n          sum[2] += data[n][0] * data[n][0];\n          sum[3] += data[n][0] * data[n][1];\n          sum[4] += data[n][1] * data[n][1];\n        }\n      }\n\n      var run = len * sum[2] - sum[0] * sum[0];\n      var rise = len * sum[3] - sum[0] * sum[1];\n      var gradient = run === 0 ? 0 : round(rise / run, options.precision);\n      var intercept = round(sum[1] / len - gradient * sum[0] / len, options.precision);\n\n      var predict = function predict(x) {\n        return [round(x, options.precision), round(gradient * x + intercept, options.precision)];\n      };\n\n      var points = data.map(function (point) {\n        return predict(point[0]);\n      });\n\n      return {\n        points: points,\n        predict: predict,\n        equation: [gradient, intercept],\n        r2: round(determinationCoefficient(data, points), options.precision),\n        string: intercept === 0 ? 'y = ' + gradient + 'x' : 'y = ' + gradient + 'x + ' + intercept\n      };\n    },\n    exponential: function exponential(data, options) {\n      var sum = [0, 0, 0, 0, 0, 0];\n\n      for (var n = 0; n < data.length; n++) {\n        if (data[n][1] !== null) {\n          sum[0] += data[n][0];\n          sum[1] += data[n][1];\n          sum[2] += data[n][0] * data[n][0] * data[n][1];\n          sum[3] += data[n][1] * Math.log(data[n][1]);\n          sum[4] += data[n][0] * data[n][1] * Math.log(data[n][1]);\n          sum[5] += data[n][0] * data[n][1];\n        }\n      }\n\n      var denominator = sum[1] * sum[2] - sum[5] * sum[5];\n      var a = Math.exp((sum[2] * sum[3] - sum[5] * sum[4]) / denominator);\n      var b = (sum[1] * sum[4] - sum[5] * sum[3]) / denominator;\n      var coeffA = round(a, options.precision);\n      var coeffB = round(b, options.precision);\n      var predict = function predict(x) {\n        return [round(x, options.precision), round(coeffA * Math.exp(coeffB * x), options.precision)];\n      };\n\n      var points = data.map(function (point) {\n        return predict(point[0]);\n      });\n\n      return {\n        points: points,\n        predict: predict,\n        equation: [coeffA, coeffB],\n        string: 'y = ' + coeffA + 'e^(' + coeffB + 'x)',\n        r2: round(determinationCoefficient(data, points), options.precision)\n      };\n    },\n    logarithmic: function logarithmic(data, options) {\n      var sum = [0, 0, 0, 0];\n      var len = data.length;\n\n      for (var n = 0; n < len; n++) {\n        if (data[n][1] !== null) {\n          sum[0] += Math.log(data[n][0]);\n          sum[1] += data[n][1] * Math.log(data[n][0]);\n          sum[2] += data[n][1];\n          sum[3] += Math.pow(Math.log(data[n][0]), 2);\n        }\n      }\n\n      var a = (len * sum[1] - sum[2] * sum[0]) / (len * sum[3] - sum[0] * sum[0]);\n      var coeffB = round(a, options.precision);\n      var coeffA = round((sum[2] - coeffB * sum[0]) / len, options.precision);\n\n      var predict = function predict(x) {\n        return [round(x, options.precision), round(round(coeffA + coeffB * Math.log(x), options.precision), options.precision)];\n      };\n\n      var points = data.map(function (point) {\n        return predict(point[0]);\n      });\n\n      return {\n        points: points,\n        predict: predict,\n        equation: [coeffA, coeffB],\n        string: 'y = ' + coeffA + ' + ' + coeffB + ' ln(x)',\n        r2: round(determinationCoefficient(data, points), options.precision)\n      };\n    },\n    power: function power(data, options) {\n      var sum = [0, 0, 0, 0, 0];\n      var len = data.length;\n\n      for (var n = 0; n < len; n++) {\n        if (data[n][1] !== null) {\n          sum[0] += Math.log(data[n][0]);\n          sum[1] += Math.log(data[n][1]) * Math.log(data[n][0]);\n          sum[2] += Math.log(data[n][1]);\n          sum[3] += Math.pow(Math.log(data[n][0]), 2);\n        }\n      }\n\n      var b = (len * sum[1] - sum[0] * sum[2]) / (len * sum[3] - Math.pow(sum[0], 2));\n      var a = (sum[2] - b * sum[0]) / len;\n      var coeffA = round(Math.exp(a), options.precision);\n      var coeffB = round(b, options.precision);\n\n      var predict = function predict(x) {\n        return [round(x, options.precision), round(round(coeffA * Math.pow(x, coeffB), options.precision), options.precision)];\n      };\n\n      var points = data.map(function (point) {\n        return predict(point[0]);\n      });\n\n      return {\n        points: points,\n        predict: predict,\n        equation: [coeffA, coeffB],\n        string: 'y = ' + coeffA + 'x^' + coeffB,\n        r2: round(determinationCoefficient(data, points), options.precision)\n      };\n    },\n    polynomial: function polynomial(data, options) {\n      var lhs = [];\n      var rhs = [];\n      var a = 0;\n      var b = 0;\n      var len = data.length;\n      var k = options.order + 1;\n\n      for (var i = 0; i < k; i++) {\n        for (var l = 0; l < len; l++) {\n          if (data[l][1] !== null) {\n            a += Math.pow(data[l][0], i) * data[l][1];\n          }\n        }\n\n        lhs.push(a);\n        a = 0;\n\n        var c = [];\n        for (var j = 0; j < k; j++) {\n          for (var _l = 0; _l < len; _l++) {\n            if (data[_l][1] !== null) {\n              b += Math.pow(data[_l][0], i + j);\n            }\n          }\n          c.push(b);\n          b = 0;\n        }\n        rhs.push(c);\n      }\n      rhs.push(lhs);\n\n      var coefficients = gaussianElimination(rhs, k).map(function (v) {\n        return round(v, options.precision);\n      });\n\n      var predict = function predict(x) {\n        return [round(x, options.precision), round(coefficients.reduce(function (sum, coeff, power) {\n          return sum + coeff * Math.pow(x, power);\n        }, 0), options.precision)];\n      };\n\n      var points = data.map(function (point) {\n        return predict(point[0]);\n      });\n\n      var string = 'y = ';\n      for (var _i = coefficients.length - 1; _i >= 0; _i--) {\n        if (_i > 1) {\n          string += coefficients[_i] + 'x^' + _i + ' + ';\n        } else if (_i === 1) {\n          string += coefficients[_i] + 'x + ';\n        } else {\n          string += coefficients[_i];\n        }\n      }\n\n      return {\n        string: string,\n        points: points,\n        predict: predict,\n        equation: [].concat(_toConsumableArray(coefficients)).reverse(),\n        r2: round(determinationCoefficient(data, points), options.precision)\n      };\n    }\n  };\n\n  function createWrapper() {\n    var reduce = function reduce(accumulator, name) {\n      return _extends({\n        _round: round\n      }, accumulator, _defineProperty({}, name, function (data, supplied) {\n        return methods[name](data, _extends({}, DEFAULT_OPTIONS, supplied));\n      }));\n    };\n\n    return Object.keys(methods).reduce(reduce, {});\n  }\n\n  module.exports = createWrapper();\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ChartRegressions = void 0;\nvar MetaData_1 = require(\"./MetaData\");\nvar Plugin = /** @class */ (function () {\n    function Plugin() {\n        this.id = 'regressions';\n        this._chartId = 0;\n        this._metadataMap = new Map();\n    }\n    Plugin.prototype.beforeInit = function (chart) {\n        chart.$$id = ++this._chartId;\n    };\n    /**\n     * Called after update (when the chart is created and when chart.update() is called)\n     * @param chart\n     */\n    Plugin.prototype.beforeUpdate = function (chart) {\n        var _this = this;\n        var o, p, r;\n        var onComplete = (o = chart.config.options) && (p = o.plugins)\n            && (r = p.regressions) && r.onCompleteCalculation;\n        forEach(chart, function (ds, meta, datasetIndex) {\n            meta = new MetaData_1.MetaDataSet(chart, ds);\n            var id = chart.$$id * 1000 + datasetIndex;\n            _this._metadataMap.set(id, meta);\n        });\n        if (onComplete)\n            onComplete(chart);\n    };\n    /**\n     * It's called once before all the drawing\n     * @param chart\n     */\n    Plugin.prototype.beforeRender = function (chart) {\n        forEach(chart, function (ds, meta) { return meta.adjustScales(); });\n    };\n    Plugin.prototype.afterDatasetsDraw = function (chart) {\n        forEach(chart, function (ds, meta) { return meta.draw(); });\n    };\n    Plugin.prototype.destroy = function (chart) {\n        var _this = this;\n        Array.from(this._metadataMap.keys())\n            .filter(function (k) { return (k / 1000) >> 0 == chart.$$id; })\n            .forEach(function (k) { return _this._metadataMap.delete(k); });\n    };\n    /** Get dataset's meta data */\n    Plugin.prototype.getDataset = function (chart, datasetIndex) {\n        var id = chart.$$id * 1000 + datasetIndex;\n        return this._metadataMap.get(id);\n    };\n    /** Get dataset's meta sections */\n    Plugin.prototype.getSections = function (chart, datasetIndex) {\n        var ds = this.getDataset(chart, datasetIndex);\n        return ds && ds.sections;\n    };\n    return Plugin;\n}());\nfunction forEach(chart, fn) {\n    chart.data.datasets.forEach(function (ds, i) {\n        if (ds.regressions && chart.isDatasetVisible(i)) {\n            var meta = exports.ChartRegressions.getDataset(chart, i);\n            fn(ds, meta, i);\n        }\n    });\n}\nexports.ChartRegressions = new Plugin();\nwindow.ChartRegressions = exports.ChartRegressions;\n"],"sourceRoot":""}