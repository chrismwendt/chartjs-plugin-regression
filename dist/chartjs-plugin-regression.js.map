{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./lib/MetaData.js","webpack:///./lib/MetaSection.js","webpack:///./lib/index.js","webpack:///./lib/types.js","webpack:///./node_modules/regression/dist/regression.js","webpack:///./lib/regression-plugin.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","MetaDataSet","MetaSection_1","chart","ds","_this","this","getXY","undefined","cfg","regressions","dataset","sections","startIndex","endIndex","data","length","map","MetaSection","points","v","forEach","section","calculate","adjustScales","topY","xScale","yScale","scales","keys","k","top","bottomY","bottom","index","y","x","getPixelForValue","draw","ctx","me","save","extendPredictions","setLineDash","_loop_1","beginPath","_setLineAttrs","line","lineWidth","fn","result","predict","calcXY","moveTo","j","lineTo","stroke","_drawPredictions","drawRegression","drawVerticalLine","restore","width","color","strokeStyle","regression","defaultConfig","type","calculation","precision","order","dash","copy","overwriteData","sec","_meta","copySectionIndex","fields","globalConfig","config","options","plugins","configMerge","cfgList","_i","arguments","dstConfig","f","srcConfig","Array","isArray","assign","includes","Error","validate","meta","sectionData","slice","reduce","max","r2","from_1","r_1","overwrite_1","data_1","_a","maxValue","Math","min","minValue","fillText","labels","__createBinding","k2","__exportStar","_extends","target","source","_toConsumableArray","arr","arr2","from","DEFAULT_OPTIONS","period","determinationCoefficient","results","predictions","observations","push","mean","a","observation","ssyy","difference","accum","prediction","residual","round","number","factor","pow","methods","linear","sum","len","run","rise","gradient","intercept","point","equation","string","exponential","log","denominator","exp","b","coeffA","coeffB","logarithmic","power","polynomial","lhs","rhs","_l","coefficients","input","matrix","maxrow","abs","tmp","_j","_k","_j2","total","_k2","gaussianElimination","coeff","concat","reverse","accumulator","_round","supplied","obj","configurable","writable","ChartRegressions","MetaData_1","_metadataMap","_chartId","Plugin","id","beforeInit","$$id","beforeUpdate","onComplete","onCompleteCalculation","datasetIndex","beforeRender","afterDatasetsDraw","easing","destroy","filter","getDataset","getSections","datasets","isDatasetVisible","window"],"mappings":"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","file":"chartjs-plugin-regression.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MetaDataSet = void 0;\nvar MetaSection_1 = require(\"./MetaSection\");\nvar MetaDataSet = /** @class */ (function () {\n    function MetaDataSet(chart, ds) {\n        var _this = this;\n        /** Scales wil be initialized in beforeDraw hook */\n        this.getXY = undefined;\n        var cfg = ds.regressions;\n        var me = this;\n        this.chart = chart;\n        this.dataset = ds;\n        this.sections = (cfg.sections || [{ startIndex: 0, endIndex: ds.data.length - 1 }])\n            .map(function (s) { return new MetaSection_1.MetaSection(s, _this); });\n        this.points = ds.data.map(function (v, i) { return [i, !i ? null : !v ? null : v]; });\n        me.sections.forEach(function (section) { return section.calculate(ds, _this); }); // Calculate Section Results\n    }\n    MetaDataSet.prototype.adjustScales = function () {\n        if (this.topY !== undefined)\n            return;\n        var xScale;\n        var yScale;\n        var scales = this.chart.scales;\n        Object.keys(scales).forEach(function (k) { return k[0] == 'x' && (xScale = scales[k]) || (yScale = scales[k]); });\n        this.topY = yScale.top;\n        this.bottomY = yScale.bottom;\n        this.getXY =\n            function (index, y) {\n                return ({\n                    x: xScale.getPixelForValue(undefined, index, undefined, true),\n                    y: yScale.getPixelForValue(y)\n                });\n            };\n    };\n    MetaDataSet.prototype.draw = function () {\n        var ctx = this.chart.chart.ctx;\n        var me = this;\n        ctx.save();\n        try {\n            if (this.dataset.regressions.extendPredictions)\n                _drawPredictions();\n            for (var i = 0; i < this.sections.length; i++) {\n                var section = this.sections[i];\n                section.drawRegression(ctx);\n                if (i < this.sections.length - 1)\n                    section.drawVerticalLine(ctx);\n            }\n        }\n        finally {\n            ctx.restore();\n        }\n        return;\n        /**\n         * Draws the previous sections predictions as a dashed thin line\n         */\n        function _drawPredictions() {\n            ctx.setLineDash([5, 5]);\n            for (var i = 1; i < me.sections.length; i++) {\n                var section = me.sections[i];\n                var _loop_1 = function (r) {\n                    ctx.beginPath();\n                    _setLineAttrs(me.sections[r].line);\n                    ctx.lineWidth = 1; // overrides the width to a thin line\n                    var fn = me.sections[r].result.predict;\n                    var calcXY = function (index) { return me.getXY(index, fn(index)[1]); };\n                    var p = calcXY(section.startIndex);\n                    ctx.moveTo(p.x, p.y);\n                    for (var j = section.startIndex + 1; j < section.endIndex + 1; j++) {\n                        p = calcXY(j);\n                        ctx.lineTo(p.x, p.y);\n                    }\n                    ctx.stroke();\n                };\n                for (var r = 0; r < i; r++) {\n                    _loop_1(r);\n                }\n            }\n        }\n        function _setLineAttrs(line) {\n            if (line.width)\n                ctx.lineWidth = line.width;\n            if (line.color)\n                ctx.strokeStyle = line.color;\n        }\n    };\n    return MetaDataSet;\n}());\nexports.MetaDataSet = MetaDataSet;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MetaSection = void 0;\nvar regression = require(\"regression\");\nvar defaultConfig = {\n    type: \"linear\",\n    calculation: {\n        precision: 2,\n        order: 2\n    },\n    line: {\n        width: 2,\n        color: '#000',\n        dash: []\n    },\n    extendPredictions: false,\n    copy: {\n        overwriteData: 'none'\n    }\n};\nvar MetaSection = /** @class */ (function () {\n    function MetaSection(sec, _meta) {\n        this._meta = _meta;\n        var chart = _meta.chart;\n        var ds = _meta.dataset;\n        // Copying from user config\n        this.copySectionIndex = sec.copySectionIndex;\n        // Calculate inherited configuration\n        var cfg = getConfig(['type', 'calculation', 'line', 'extendPredictions', 'copy']);\n        this.startIndex = sec.startIndex || 0;\n        this.endIndex = sec.endIndex || ds.data.length - 1;\n        this.type = Array.isArray(cfg.type) ? cfg.type : [cfg.type];\n        this.line = cfg.line;\n        this.calculation = cfg.calculation;\n        this.extendPredictions = cfg.extendPredictions;\n        this.copy = cfg.copy;\n        validate(this.type);\n        // --- constructor helpers\n        function getConfig(fields) {\n            var o, p;\n            var globalConfig = (o = chart.config.options) && (p = o.plugins) && p.regressions || {};\n            return configMerge(fields, defaultConfig, globalConfig, ds.regressions, sec);\n        }\n        function configMerge(fields) {\n            var cfgList = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                cfgList[_i - 1] = arguments[_i];\n            }\n            var dstConfig = {};\n            fields.forEach(function (f) {\n                cfgList.forEach(function (srcConfig) {\n                    var o = srcConfig[f];\n                    var t = typeof o;\n                    if (t != 'undefined') {\n                        if (Array.isArray(o) || t != 'object' || o == null)\n                            dstConfig[f] = o;\n                        else\n                            dstConfig[f] = Object.assign({}, dstConfig[f], configMerge(Object.keys(o), o));\n                    }\n                });\n            });\n            return dstConfig;\n        }\n        function validate(type) {\n            if (type.length > 1 && type.includes('copy'))\n                throw Error('Invalid regression type:' + cfg.type + '. \"none\" cannot be combined with other type!');\n        }\n    }\n    MetaSection.prototype.calculate = function (ds, meta) {\n        var _this = this;\n        var sectionData = meta.points.slice(this.startIndex, this.endIndex + 1);\n        if (this.type[0] != 'copy') {\n            this.result = this.type.reduce(function (max, type) {\n                var r = regression[type](sectionData, _this.calculation);\n                r.type = type;\n                return (!max || max.r2 < r.r2) ? r : max;\n            }, null);\n        }\n        else if (this.copySectionIndex) {\n            var from_1 = meta.sections[this.copySectionIndex], r_1 = this.result = Object.assign({}, from_1.result), overwrite_1 = this.copy.overwriteData, data_1 = ds.data;\n            r_1.points = sectionData.map(function (p) { return r_1.predict(p[0]); });\n            delete r_1.r2;\n            if (overwrite_1 != 'none')\n                r_1.points.forEach(function (_a) {\n                    var index = _a[0], value = _a[1];\n                    if ((index < from_1.startIndex || index > from_1.endIndex) &&\n                        (overwrite_1 == 'all' ||\n                            overwrite_1 == 'last' && index == _this.endIndex ||\n                            overwrite_1 == 'empty' && !data_1[index])) {\n                        if (_this.copy.maxValue)\n                            value = Math.min(_this.copy.maxValue, value);\n                        if (_this.copy.minValue)\n                            value = Math.max(_this.copy.minValue, value);\n                        data_1[index] = value;\n                    }\n                });\n        }\n    };\n    MetaSection.prototype.drawVerticalLine = function (ctx) {\n        ctx.beginPath();\n        this._setLineAttrs(ctx);\n        ctx.setLineDash([10, 2]);\n        ctx.lineWidth = 2;\n        // Print vertical line\n        var p = this._meta.getXY(this.endIndex, 0);\n        ctx.moveTo(p.x, this._meta.topY);\n        ctx.lineTo(p.x, this._meta.bottomY);\n        // ctx.fillText(xScale.getLabelForIndex(this.end), p.x, yScale.top);\n        ctx.fillText(this._meta.chart.data.labels[this.endIndex], p.x, this._meta.topY);\n        ctx.stroke();\n    };\n    MetaSection.prototype.drawRegression = function (ctx) {\n        ctx.beginPath();\n        this._setLineAttrs(ctx);\n        var points = this.result.points;\n        if (!points.length)\n            return;\n        var p = this._meta.getXY(this.startIndex, points[0][1]);\n        ctx.moveTo(p.x, p.y);\n        for (var k = 1, j = this.startIndex + 1; j <= this.endIndex; j++, k++) {\n            // const y = this.result!.predict(j)[1];\n            var y = (k < points.length ? points[k] : this.result.predict(j))[1];\n            p = this._meta.getXY(j, y);\n            ctx.lineTo(p.x, p.y);\n        }\n        ctx.stroke();\n    };\n    MetaSection.prototype._setLineAttrs = function (ctx) {\n        if (this.line.width)\n            ctx.lineWidth = this.line.width;\n        if (this.line.color)\n            ctx.strokeStyle = this.line.color;\n        if (this.line.dash)\n            ctx.setLineDash(this.line.dash);\n    };\n    return MetaSection;\n}());\nexports.MetaSection = MetaSection;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./types\"), exports);\n__exportStar(require(\"./MetaData\"), exports);\n__exportStar(require(\"./MetaSection\"), exports);\n__exportStar(require(\"./regression-plugin\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define(['module'], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(module);\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod);\n    global.regression = mod.exports;\n  }\n})(this, function (module) {\n  'use strict';\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  var _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  function _toConsumableArray(arr) {\n    if (Array.isArray(arr)) {\n      for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n        arr2[i] = arr[i];\n      }\n\n      return arr2;\n    } else {\n      return Array.from(arr);\n    }\n  }\n\n  var DEFAULT_OPTIONS = { order: 2, precision: 2, period: null };\n\n  /**\n  * Determine the coefficient of determination (r^2) of a fit from the observations\n  * and predictions.\n  *\n  * @param {Array<Array<number>>} data - Pairs of observed x-y values\n  * @param {Array<Array<number>>} results - Pairs of observed predicted x-y values\n  *\n  * @return {number} - The r^2 value, or NaN if one cannot be calculated.\n  */\n  function determinationCoefficient(data, results) {\n    var predictions = [];\n    var observations = [];\n\n    data.forEach(function (d, i) {\n      if (d[1] !== null) {\n        observations.push(d);\n        predictions.push(results[i]);\n      }\n    });\n\n    var sum = observations.reduce(function (a, observation) {\n      return a + observation[1];\n    }, 0);\n    var mean = sum / observations.length;\n\n    var ssyy = observations.reduce(function (a, observation) {\n      var difference = observation[1] - mean;\n      return a + difference * difference;\n    }, 0);\n\n    var sse = observations.reduce(function (accum, observation, index) {\n      var prediction = predictions[index];\n      var residual = observation[1] - prediction[1];\n      return accum + residual * residual;\n    }, 0);\n\n    return 1 - sse / ssyy;\n  }\n\n  /**\n  * Determine the solution of a system of linear equations A * x = b using\n  * Gaussian elimination.\n  *\n  * @param {Array<Array<number>>} input - A 2-d matrix of data in row-major form [ A | b ]\n  * @param {number} order - How many degrees to solve for\n  *\n  * @return {Array<number>} - Vector of normalized solution coefficients matrix (x)\n  */\n  function gaussianElimination(input, order) {\n    var matrix = input;\n    var n = input.length - 1;\n    var coefficients = [order];\n\n    for (var i = 0; i < n; i++) {\n      var maxrow = i;\n      for (var j = i + 1; j < n; j++) {\n        if (Math.abs(matrix[i][j]) > Math.abs(matrix[i][maxrow])) {\n          maxrow = j;\n        }\n      }\n\n      for (var k = i; k < n + 1; k++) {\n        var tmp = matrix[k][i];\n        matrix[k][i] = matrix[k][maxrow];\n        matrix[k][maxrow] = tmp;\n      }\n\n      for (var _j = i + 1; _j < n; _j++) {\n        for (var _k = n; _k >= i; _k--) {\n          matrix[_k][_j] -= matrix[_k][i] * matrix[i][_j] / matrix[i][i];\n        }\n      }\n    }\n\n    for (var _j2 = n - 1; _j2 >= 0; _j2--) {\n      var total = 0;\n      for (var _k2 = _j2 + 1; _k2 < n; _k2++) {\n        total += matrix[_k2][_j2] * coefficients[_k2];\n      }\n\n      coefficients[_j2] = (matrix[n][_j2] - total) / matrix[_j2][_j2];\n    }\n\n    return coefficients;\n  }\n\n  /**\n  * Round a number to a precision, specificed in number of decimal places\n  *\n  * @param {number} number - The number to round\n  * @param {number} precision - The number of decimal places to round to:\n  *                             > 0 means decimals, < 0 means powers of 10\n  *\n  *\n  * @return {numbr} - The number, rounded\n  */\n  function round(number, precision) {\n    var factor = Math.pow(10, precision);\n    return Math.round(number * factor) / factor;\n  }\n\n  /**\n  * The set of all fitting methods\n  *\n  * @namespace\n  */\n  var methods = {\n    linear: function linear(data, options) {\n      var sum = [0, 0, 0, 0, 0];\n      var len = 0;\n\n      for (var n = 0; n < data.length; n++) {\n        if (data[n][1] !== null) {\n          len++;\n          sum[0] += data[n][0];\n          sum[1] += data[n][1];\n          sum[2] += data[n][0] * data[n][0];\n          sum[3] += data[n][0] * data[n][1];\n          sum[4] += data[n][1] * data[n][1];\n        }\n      }\n\n      var run = len * sum[2] - sum[0] * sum[0];\n      var rise = len * sum[3] - sum[0] * sum[1];\n      var gradient = run === 0 ? 0 : round(rise / run, options.precision);\n      var intercept = round(sum[1] / len - gradient * sum[0] / len, options.precision);\n\n      var predict = function predict(x) {\n        return [round(x, options.precision), round(gradient * x + intercept, options.precision)];\n      };\n\n      var points = data.map(function (point) {\n        return predict(point[0]);\n      });\n\n      return {\n        points: points,\n        predict: predict,\n        equation: [gradient, intercept],\n        r2: round(determinationCoefficient(data, points), options.precision),\n        string: intercept === 0 ? 'y = ' + gradient + 'x' : 'y = ' + gradient + 'x + ' + intercept\n      };\n    },\n    exponential: function exponential(data, options) {\n      var sum = [0, 0, 0, 0, 0, 0];\n\n      for (var n = 0; n < data.length; n++) {\n        if (data[n][1] !== null) {\n          sum[0] += data[n][0];\n          sum[1] += data[n][1];\n          sum[2] += data[n][0] * data[n][0] * data[n][1];\n          sum[3] += data[n][1] * Math.log(data[n][1]);\n          sum[4] += data[n][0] * data[n][1] * Math.log(data[n][1]);\n          sum[5] += data[n][0] * data[n][1];\n        }\n      }\n\n      var denominator = sum[1] * sum[2] - sum[5] * sum[5];\n      var a = Math.exp((sum[2] * sum[3] - sum[5] * sum[4]) / denominator);\n      var b = (sum[1] * sum[4] - sum[5] * sum[3]) / denominator;\n      var coeffA = round(a, options.precision);\n      var coeffB = round(b, options.precision);\n      var predict = function predict(x) {\n        return [round(x, options.precision), round(coeffA * Math.exp(coeffB * x), options.precision)];\n      };\n\n      var points = data.map(function (point) {\n        return predict(point[0]);\n      });\n\n      return {\n        points: points,\n        predict: predict,\n        equation: [coeffA, coeffB],\n        string: 'y = ' + coeffA + 'e^(' + coeffB + 'x)',\n        r2: round(determinationCoefficient(data, points), options.precision)\n      };\n    },\n    logarithmic: function logarithmic(data, options) {\n      var sum = [0, 0, 0, 0];\n      var len = data.length;\n\n      for (var n = 0; n < len; n++) {\n        if (data[n][1] !== null) {\n          sum[0] += Math.log(data[n][0]);\n          sum[1] += data[n][1] * Math.log(data[n][0]);\n          sum[2] += data[n][1];\n          sum[3] += Math.pow(Math.log(data[n][0]), 2);\n        }\n      }\n\n      var a = (len * sum[1] - sum[2] * sum[0]) / (len * sum[3] - sum[0] * sum[0]);\n      var coeffB = round(a, options.precision);\n      var coeffA = round((sum[2] - coeffB * sum[0]) / len, options.precision);\n\n      var predict = function predict(x) {\n        return [round(x, options.precision), round(round(coeffA + coeffB * Math.log(x), options.precision), options.precision)];\n      };\n\n      var points = data.map(function (point) {\n        return predict(point[0]);\n      });\n\n      return {\n        points: points,\n        predict: predict,\n        equation: [coeffA, coeffB],\n        string: 'y = ' + coeffA + ' + ' + coeffB + ' ln(x)',\n        r2: round(determinationCoefficient(data, points), options.precision)\n      };\n    },\n    power: function power(data, options) {\n      var sum = [0, 0, 0, 0, 0];\n      var len = data.length;\n\n      for (var n = 0; n < len; n++) {\n        if (data[n][1] !== null) {\n          sum[0] += Math.log(data[n][0]);\n          sum[1] += Math.log(data[n][1]) * Math.log(data[n][0]);\n          sum[2] += Math.log(data[n][1]);\n          sum[3] += Math.pow(Math.log(data[n][0]), 2);\n        }\n      }\n\n      var b = (len * sum[1] - sum[0] * sum[2]) / (len * sum[3] - Math.pow(sum[0], 2));\n      var a = (sum[2] - b * sum[0]) / len;\n      var coeffA = round(Math.exp(a), options.precision);\n      var coeffB = round(b, options.precision);\n\n      var predict = function predict(x) {\n        return [round(x, options.precision), round(round(coeffA * Math.pow(x, coeffB), options.precision), options.precision)];\n      };\n\n      var points = data.map(function (point) {\n        return predict(point[0]);\n      });\n\n      return {\n        points: points,\n        predict: predict,\n        equation: [coeffA, coeffB],\n        string: 'y = ' + coeffA + 'x^' + coeffB,\n        r2: round(determinationCoefficient(data, points), options.precision)\n      };\n    },\n    polynomial: function polynomial(data, options) {\n      var lhs = [];\n      var rhs = [];\n      var a = 0;\n      var b = 0;\n      var len = data.length;\n      var k = options.order + 1;\n\n      for (var i = 0; i < k; i++) {\n        for (var l = 0; l < len; l++) {\n          if (data[l][1] !== null) {\n            a += Math.pow(data[l][0], i) * data[l][1];\n          }\n        }\n\n        lhs.push(a);\n        a = 0;\n\n        var c = [];\n        for (var j = 0; j < k; j++) {\n          for (var _l = 0; _l < len; _l++) {\n            if (data[_l][1] !== null) {\n              b += Math.pow(data[_l][0], i + j);\n            }\n          }\n          c.push(b);\n          b = 0;\n        }\n        rhs.push(c);\n      }\n      rhs.push(lhs);\n\n      var coefficients = gaussianElimination(rhs, k).map(function (v) {\n        return round(v, options.precision);\n      });\n\n      var predict = function predict(x) {\n        return [round(x, options.precision), round(coefficients.reduce(function (sum, coeff, power) {\n          return sum + coeff * Math.pow(x, power);\n        }, 0), options.precision)];\n      };\n\n      var points = data.map(function (point) {\n        return predict(point[0]);\n      });\n\n      var string = 'y = ';\n      for (var _i = coefficients.length - 1; _i >= 0; _i--) {\n        if (_i > 1) {\n          string += coefficients[_i] + 'x^' + _i + ' + ';\n        } else if (_i === 1) {\n          string += coefficients[_i] + 'x + ';\n        } else {\n          string += coefficients[_i];\n        }\n      }\n\n      return {\n        string: string,\n        points: points,\n        predict: predict,\n        equation: [].concat(_toConsumableArray(coefficients)).reverse(),\n        r2: round(determinationCoefficient(data, points), options.precision)\n      };\n    }\n  };\n\n  function createWrapper() {\n    var reduce = function reduce(accumulator, name) {\n      return _extends({\n        _round: round\n      }, accumulator, _defineProperty({}, name, function (data, supplied) {\n        return methods[name](data, _extends({}, DEFAULT_OPTIONS, supplied));\n      }));\n    };\n\n    return Object.keys(methods).reduce(reduce, {});\n  }\n\n  module.exports = createWrapper();\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ChartRegressions = void 0;\nvar MetaData_1 = require(\"./MetaData\");\n// Cache for all plugins' metadata\nvar _metadataMap = {};\nvar _chartId = 0;\nvar Plugin = /** @class */ (function () {\n    function Plugin() {\n        this.id = 'regressions';\n    }\n    Plugin.prototype.beforeInit = function (chart) {\n        chart.$$id = ++_chartId;\n    };\n    /**\n     * Called after update (when the chart is created and when chart.update() is called)\n     * @param chart\n     */\n    Plugin.prototype.beforeUpdate = function (chart, options) {\n        var o, p, r;\n        var onComplete = (o = chart.config.options) && (p = o.plugins)\n            && (r = p.regressions) && r.onCompleteCalculation;\n        forEach(chart, function (ds, meta, datasetIndex) {\n            meta = new MetaData_1.MetaDataSet(chart, ds);\n            var id = chart.$$id * 1000 + datasetIndex;\n            _metadataMap[id] = meta;\n        });\n        if (onComplete)\n            onComplete(chart);\n    };\n    /**\n     * It's called once before all the drawing\n     * @param chart\n     */\n    Plugin.prototype.beforeRender = function (chart, options) {\n        forEach(chart, function (ds, meta) { return meta.adjustScales(); });\n    };\n    Plugin.prototype.afterDatasetsDraw = function (chart, easing, options) {\n        forEach(chart, function (ds, meta) { return meta.draw(); });\n    };\n    Plugin.prototype.destroy = function (chart) {\n        Object.keys(_metadataMap)\n            .filter(function (k) { return (k / 1000) >> 0 == chart.$$id; })\n            .forEach(function (k) { return delete _metadataMap[k]; });\n    };\n    /** Get dataset's meta data */\n    Plugin.prototype.getDataset = function (chart, datasetIndex) {\n        var id = chart.$$id * 1000 + datasetIndex;\n        return _metadataMap[id];\n    };\n    /** Get dataset's meta sections */\n    Plugin.prototype.getSections = function (chart, datasetIndex) {\n        var ds = this.getDataset(chart, datasetIndex);\n        return ds && ds.sections;\n    };\n    return Plugin;\n}());\nfunction forEach(chart, fn) {\n    chart.data.datasets.forEach(function (ds, i) {\n        if (ds.regressions && chart.isDatasetVisible(i)) {\n            var meta = exports.ChartRegressions.getDataset(chart, i);\n            fn(ds, meta, i);\n        }\n    });\n}\nexports.ChartRegressions = new Plugin();\nwindow.ChartRegressions = exports.ChartRegressions;\n"],"sourceRoot":""}