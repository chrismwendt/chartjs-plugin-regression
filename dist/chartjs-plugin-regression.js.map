{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./lib/index.js","webpack:///./lib/regression-plugin.js","webpack:///./lib/MetaData.js","webpack:///./lib/MetaSection.js","webpack:///./node_modules/regression/dist/regression.js","webpack:///./lib/tools.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__createBinding","this","k","k2","undefined","__exportStar","ChartRegressions","MetaData_1","Plugin","id","_chartId","_metadataMap","Map","beforeInit","chart","$$id","beforeUpdate","_this","onComplete","config","options","plugins","regressions","onCompleteCalculation","forEach","ds","meta","datasetIndex","MetaDataSet","set","beforeRender","adjustScales","afterDatasetsDraw","draw","destroy","Array","from","keys","filter","delete","getDataset","getSections","sections","fn","data","datasets","isDatasetVisible","window","MetaSection_1","getXY","cfg","dataset","startIndex","endIndex","length","map","MetaSection","points","v","section","calculate","topY","xScale","yScale","scales","top","bottomY","bottom","index","y","x","getPixelForValue","ctx","me","save","extendPredictions","setLineDash","_loop_1","beginPath","_setLineAttrs","line","lineWidth","result","predict","calcXY","moveTo","j","lineTo","stroke","_drawPredictions","drawRegression","drawVerticalLine","restore","width","color","strokeStyle","regression","tools_1","defaultOptions","type","precision","dash","sec","_meta","copySectionIndex","copyOverData","globalOpts","simpleMerge","fieldNames","objs","_i","arguments","fields","split","ret","_a","objs_1","obj","deepCopy","_b","fields_1","f","isArray","_regressionOptions","includes","Error","validate","sectionData","slice","reduce","max","r2","from_1","r_1","assign","overwrite_1","data_1","fillText","labels","_extends","target","source","_toConsumableArray","arr","arr2","DEFAULT_OPTIONS","order","period","determinationCoefficient","results","predictions","observations","push","mean","a","observation","ssyy","difference","accum","prediction","residual","round","number","factor","Math","pow","methods","linear","sum","len","run","rise","gradient","intercept","point","equation","string","exponential","log","denominator","exp","b","coeffA","coeffB","logarithmic","power","polynomial","lhs","rhs","_l","coefficients","input","matrix","maxrow","abs","tmp","_j","_k","_j2","total","_k2","gaussianElimination","coeff","concat","reverse","accumulator","_round","supplied","configurable","writable","Date","getTime","field"],"mappings":"aACE,IAAIA,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUC,QAGnC,IAAIC,EAASJ,EAAiBE,GAAY,CACzCG,EAAGH,EACHI,GAAG,EACHH,QAAS,IAUV,OANAI,EAAQL,GAAUM,KAAKJ,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAG/DG,EAAOE,GAAI,EAGJF,EAAOD,QAKfF,EAAoBQ,EAAIF,EAGxBN,EAAoBS,EAAIV,EAGxBC,EAAoBU,EAAI,SAASR,EAASS,EAAMC,GAC3CZ,EAAoBa,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEZ,EAAoBkB,EAAI,SAAShB,GACX,oBAAXiB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAeb,EAASiB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,KAQvDrB,EAAoBsB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQrB,EAAoBqB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFA1B,EAAoBkB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOrB,EAAoBU,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRzB,EAAoB6B,EAAI,SAAS1B,GAChC,IAAIS,EAAST,GAAUA,EAAOqB,WAC7B,WAAwB,OAAOrB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAH,EAAoBU,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRZ,EAAoBa,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG/B,EAAoBkC,EAAI,GAIjBlC,EAAoBA,EAAoBmC,EAAI,G,+BCjFrD,IAAIC,EAAmBC,MAAQA,KAAKD,kBAAqBtB,OAAOY,OAAS,SAAUb,EAAGL,EAAG8B,EAAGC,QAC7EC,IAAPD,IAAkBA,EAAKD,GAC3BxB,OAAOC,eAAeF,EAAG0B,EAAI,CAAEvB,YAAY,EAAMC,IAAK,WAAa,OAAOT,EAAE8B,OAC3E,SAAUzB,EAAGL,EAAG8B,EAAGC,QACTC,IAAPD,IAAkBA,EAAKD,GAC3BzB,EAAE0B,GAAM/B,EAAE8B,KAEVG,EAAgBJ,MAAQA,KAAKI,cAAiB,SAASjC,EAAGN,GAC1D,IAAK,IAAIgC,KAAK1B,EAAa,YAAN0B,GAAoBhC,EAAQ+B,eAAeC,IAAIE,EAAgBlC,EAASM,EAAG0B,IAEpGpB,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IACtDoB,EAAa,EAAQ,GAAwBvC,I,6BCX7CY,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IACtDnB,EAAQwC,sBAAmB,EAC3B,IAAIC,EAAa,EAAQ,GACrBC,EAAwB,WACxB,SAASA,IACLP,KAAKQ,GAAK,cACVR,KAAKS,SAAW,EAChBT,KAAKU,aAAe,IAAIC,IAgD5B,OA9CAJ,EAAOZ,UAAUiB,WAAa,SAAUC,GACpCA,EAAMC,OAASd,KAAKS,UAMxBF,EAAOZ,UAAUoB,aAAe,SAAUF,GACtC,IACIrC,EAAGqB,EAAGhB,EADNmC,EAAQhB,KAERiB,GAAczC,EAAIqC,EAAMK,OAAOC,WAAatB,EAAIrB,EAAE4C,WAC9CvC,EAAIgB,EAAEwB,cAAgBxC,EAAEyC,sBAChCC,EAAQV,GAAO,SAAUW,EAAIC,EAAMC,GAC/BD,EAAO,IAAInB,EAAWqB,YAAYd,EAAOW,GACzC,IAAIhB,EAAkB,IAAbK,EAAMC,KAAcY,EAC7BV,EAAMN,aAAakB,IAAIpB,EAAIiB,MAE3BR,GACAA,EAAWJ,IAMnBN,EAAOZ,UAAUkC,aAAe,SAAUhB,GACtCU,EAAQV,GAAO,SAAUW,EAAIC,GAAQ,OAAOA,EAAKK,mBAErDvB,EAAOZ,UAAUoC,kBAAoB,SAAUlB,GAC3CU,EAAQV,GAAO,SAAUW,EAAIC,GAAQ,OAAOA,EAAKO,WAErDzB,EAAOZ,UAAUsC,QAAU,SAAUpB,GACjC,IAAIG,EAAQhB,KACZkC,MAAMC,KAAKnC,KAAKU,aAAa0B,QACxBC,QAAO,SAAUpC,GAAK,OAAQA,EAAI,KAAS,GAAKY,EAAMC,QACtDS,SAAQ,SAAUtB,GAAK,OAAOe,EAAMN,aAAa4B,OAAOrC,OAGjEM,EAAOZ,UAAU4C,WAAa,SAAU1B,EAAOa,GAC3C,IAAIlB,EAAkB,IAAbK,EAAMC,KAAcY,EAC7B,OAAO1B,KAAKU,aAAa9B,IAAI4B,IAGjCD,EAAOZ,UAAU6C,YAAc,SAAU3B,EAAOa,GAC5C,IAAIF,EAAKxB,KAAKuC,WAAW1B,EAAOa,GAChC,OAAOF,GAAMA,EAAGiB,UAEblC,EApDgB,GAsD3B,SAASgB,EAAQV,EAAO6B,GACpB7B,EAAM8B,KAAKC,SAASrB,SAAQ,SAAUC,EAAIzD,GACtC,GAAIyD,EAAGH,aAAeR,EAAMgC,iBAAiB9E,GAAI,CAC7C,IAAI0D,EAAO5D,EAAQwC,iBAAiBkC,WAAW1B,EAAO9C,GACtD2E,EAAGlB,EAAIC,EAAM1D,OAIzBF,EAAQwC,iBAAmB,IAAIE,EAC/BuC,OAAOzC,iBAAmBxC,EAAQwC,kB,6BClElC5B,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IACtDnB,EAAQ8D,iBAAc,EACtB,IAAIoB,EAAgB,EAAQ,GACxBpB,EAA6B,WAC7B,SAASA,EAAYd,EAAOW,GACxB,IAAIR,EAAQhB,KAEZA,KAAKgD,WAAQ7C,EACb,IAAI8C,EAAMzB,EAAGH,YAEbrB,KAAKa,MAAQA,EACbb,KAAKkD,QAAU1B,EACfxB,KAAKyC,UAAYQ,EAAIR,UAAY,CAAC,CAAEU,WAAY,EAAGC,SAAU5B,EAAGmB,KAAKU,OAAS,KACzEC,KAAI,SAAUxD,GAAK,OAAO,IAAIiD,EAAcQ,YAAYzD,EAAGkB,MAChEhB,KAAKwD,OAAShC,EAAGmB,KAAKW,KAAI,SAAUG,EAAG1F,GAAK,MAAO,CAACA,EAAIA,GAAY0F,GAAR,SALnDzD,KAMNyC,SAASlB,SAAQ,SAAUmC,GAAW,OAAOA,EAAQC,UAAUnC,EAAIR,MAsE1E,OApEAW,EAAYhC,UAAUmC,aAAe,WACjC,QAAkB3B,IAAdH,KAAK4D,KAAT,CAEA,IAAIC,EACAC,EACAC,EAAS/D,KAAKa,MAAMkD,OACxBtF,OAAO2D,KAAK2B,GAAQxC,SAAQ,SAAUtB,GAAK,MAAe,KAARA,EAAE,KAAc4D,EAASE,EAAO9D,MAAQ6D,EAASC,EAAO9D,OAC1GD,KAAK4D,KAAOE,EAAOE,IACnBhE,KAAKiE,QAAUH,EAAOI,OACtBlE,KAAKgD,MACD,SAAUmB,EAAOC,GACb,MAAO,CACHC,EAAGR,EAAOS,sBAAiBnE,EAAWgE,OAAOhE,GAAW,GACxDiE,EAAGN,EAAOQ,iBAAiBF,OAI3CzC,EAAYhC,UAAUqC,KAAO,WACzB,IAAIuC,EAAMvE,KAAKa,MAAMA,MAAM0D,IACvBC,EAAKxE,KACTuE,EAAIE,OACJ,IACQzE,KAAKkD,QAAQ7B,YAAYqD,mBAgBjC,WACIH,EAAII,YAAY,CAAC,EAAG,IACpB,IAAK,IAAI5G,EAAI,EAAGA,EAAIyG,EAAG/B,SAASY,OAAQtF,IAgBpC,IAfA,IAAI2F,EAAUc,EAAG/B,SAAS1E,GACtB6G,EAAU,SAAU/F,GACpB0F,EAAIM,YACJC,EAAcN,EAAG/B,SAAS5D,GAAGkG,MAC7BR,EAAIS,UAAY,EAChB,IAAItC,EAAK8B,EAAG/B,SAAS5D,GAAGoG,OAAOC,QAC3BC,EAAS,SAAUhB,GAAS,OAAOK,EAAGxB,MAAMmB,EAAOzB,EAAGyB,GAAO,KAC7DtE,EAAIsF,EAAOzB,EAAQP,YACvBoB,EAAIa,OAAOvF,EAAEwE,EAAGxE,EAAEuE,GAClB,IAAK,IAAIiB,EAAI3B,EAAQP,WAAa,EAAGkC,EAAI3B,EAAQN,SAAW,EAAGiC,IAC3DxF,EAAIsF,EAAOE,GACXd,EAAIe,OAAOzF,EAAEwE,EAAGxE,EAAEuE,GAEtBG,EAAIgB,UAEC1G,EAAI,EAAGA,EAAId,EAAGc,IACnB+F,EAAQ/F,GAlCZ2G,GACJ,IAAK,IAAIzH,EAAI,EAAGA,EAAIiC,KAAKyC,SAASY,OAAQtF,IAAK,CAC3C,IAAI2F,EAAU1D,KAAKyC,SAAS1E,GAC5B2F,EAAQ+B,eAAelB,GACnBxG,EAAIiC,KAAKyC,SAASY,OAAS,GAC3BK,EAAQgC,iBAAiBnB,IAGrC,QACIA,EAAIoB,UAER,OA2BA,SAASb,EAAcC,GACfA,EAAKa,QACLrB,EAAIS,UAAYD,EAAKa,OACrBb,EAAKc,QACLtB,EAAIuB,YAAcf,EAAKc,SAG5BlE,EAlFqB,GAoFhC9D,EAAQ8D,YAAcA,G,6BCvFtBlD,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IACtDnB,EAAQ0F,iBAAc,EACtB,IAAIwC,EAAa,EAAQ,GACrBC,EAAU,EAAQ,GAClBC,EAAiB,CACjBC,KAAM,SACNC,UAAW,EACXpB,KAAM,CACFa,MAAO,EACPC,MAAO,OACPO,KAAM,IAEV1B,mBAAmB,GAEnBnB,EAA6B,WAC7B,SAASA,EAAY8C,EAAKC,GACtBtG,KAAKsG,MAAQA,EACb,IAAIzF,EAAQyF,EAAMzF,MACdW,EAAK8E,EAAMpD,QAEflD,KAAKmD,WAAakD,EAAIlD,WACtBnD,KAAKoD,SAAWiD,EAAIjD,SACpBpD,KAAKuG,iBAAmBF,EAAIE,iBAC5BvG,KAAKwG,aAAeH,EAAIG,aAExB,IASQhI,EAAGqB,EATP4G,GAUQjI,EAAIqC,EAAMK,OAAOC,WAAatB,EAAIrB,EAAE4C,UAAYvB,EAAEwB,aAAe,GATzE4B,EAAMyD,EAAY,mCAAoCT,EAAgBQ,EAAYjF,EAAGH,YAAagF,GAetG,SAASK,EAAYC,GAEjB,IADA,IAAIC,EAAO,GACFC,EAAK,EAAGA,EAAKC,UAAUzD,OAAQwD,IACpCD,EAAKC,EAAK,GAAKC,UAAUD,GAI7B,IAFA,IAAIE,EAASJ,EAAWK,MAAM,KAC1BC,EAAM,GACDC,EAAK,EAAGC,EAASP,EAAMM,EAAKC,EAAO9D,OAAQ6D,IAAM,CACtD,IAAIE,EAAMD,EAAOD,GACjB,GAAKE,EAGL,IADA,IAAI5I,EAAIwH,EAAQqB,SAASD,EAAKL,GACrBO,EAAK,EAAGC,EAAWR,EAAQO,EAAKC,EAASlE,OAAQiE,IAAM,CAC5D,IAAIE,EAAID,EAASD,QACE,IAAR9I,EAAEgJ,KACTP,EAAIO,GAAKhJ,EAAEgJ,KAIvB,OAAOP,EAjCXjH,KAAK+E,KAAO2B,EAAY,mBAAoBT,EAAelB,KAAM0B,EAAW1B,KAAMvD,EAAGH,YAAY0D,KAAMsB,EAAItB,MAC3G/E,KAAKkG,KAAOhE,MAAMuF,QAAQxE,EAAIiD,MAAQjD,EAAIiD,KAAO,CAACjD,EAAIiD,MACtDlG,KAAK0H,mBAAqB,CAAEvB,UAAWlD,EAAIkD,WAAa,GACxDnG,KAAK0E,kBAAoBzB,EAAIyB,kBAO7B,SAAkBwB,GACd,GAAIA,EAAK7C,OAAS,GAAK6C,EAAKyB,SAAS,QACjC,MAAMC,MAAM,2BAA6B3E,EAAIiD,KAAO,gDAR5D2B,CAAS7H,KAAKkG,MA6FlB,OA7DA3C,EAAY5D,UAAUgE,UAAY,SAAUnC,EAAIC,GAC5C,IAAIT,EAAQhB,KACR8H,EAAcrG,EAAK+B,OAAOuE,MAAM/H,KAAKmD,WAAYnD,KAAKoD,SAAW,GACrE,GAAoB,QAAhBpD,KAAKkG,KAAK,GACVlG,KAAKiF,OAASjF,KAAKkG,KAAK8B,QAAO,SAAUC,EAAK/B,GAC1C,IAAIrH,EAAIkH,EAAWG,GAAM4B,EAAa9G,EAAM0G,oBAE5C,OADA7I,EAAEqH,KAAOA,GACA+B,GAAOA,EAAIC,GAAKrJ,EAAEqJ,GAAMrJ,EAAIoJ,IACtC,WAEF,GAAIjI,KAAKuG,iBAAkB,CAC5B,IAAI4B,EAAS1G,EAAKgB,SAASzC,KAAKuG,kBAAmB6B,EAAMpI,KAAKiF,OAASxG,OAAO4J,OAAO,GAAIF,EAAOlD,QAASqD,EAActI,KAAKwG,aAAc+B,EAAS/G,EAAGmB,KACtJyF,EAAI5E,OAASsE,EAAYxE,KAAI,SAAUzD,GAAK,OAAOuI,EAAIlD,QAAQrF,EAAE,cAC1DuI,EAAIF,GACXE,EAAI5E,OAAOjC,SAAQ,SAAU2F,GACzB,IAAI/C,EAAQ+C,EAAG,GAAIlI,EAAQkI,EAAG,IACzB/C,EAAQgE,EAAOhF,YAAcgB,EAAQgE,EAAO/E,YAC7B,OAAfkF,GACkB,QAAfA,GAAyBnE,GAASnD,EAAMoC,UACzB,SAAfkF,IAA2BC,EAAOpE,MACtCoE,EAAOpE,GAASnF,QAIhCuE,EAAY5D,UAAU+F,iBAAmB,SAAUnB,GAC/CA,EAAIM,YACJ7E,KAAK8E,cAAcP,GACnBA,EAAII,YAAY,CAAC,GAAI,IACrBJ,EAAIS,UAAY,EAEhB,IAAInF,EAAIG,KAAKsG,MAAMtD,MAAMhD,KAAKoD,SAAU,GACxCmB,EAAIa,OAAOvF,EAAEwE,EAAGrE,KAAKsG,MAAM1C,MAC3BW,EAAIe,OAAOzF,EAAEwE,EAAGrE,KAAKsG,MAAMrC,SAE3BM,EAAIiE,SAASxI,KAAKsG,MAAMzF,MAAM8B,KAAK8F,OAAOzI,KAAKoD,UAAWvD,EAAEwE,EAAGrE,KAAKsG,MAAM1C,MAC1EW,EAAIgB,UAERhC,EAAY5D,UAAU8F,eAAiB,SAAUlB,GAC7CA,EAAIM,YACJ7E,KAAK8E,cAAcP,GACnB,IAAIf,EAASxD,KAAKiF,OAAOzB,OACzB,GAAKA,EAAOH,OAAZ,CAEA,IAAIxD,EAAIG,KAAKsG,MAAMtD,MAAMhD,KAAKmD,WAAYK,EAAO,GAAG,IACpDe,EAAIa,OAAOvF,EAAEwE,EAAGxE,EAAEuE,GAClB,IAAK,IAAInE,EAAI,EAAGoF,EAAIrF,KAAKmD,WAAa,EAAGkC,GAAKrF,KAAKoD,SAAUiC,IAAKpF,IAAK,CAEnE,IAAImE,GAAKnE,EAAIuD,EAAOH,OAASG,EAAOvD,GAAKD,KAAKiF,OAAOC,QAAQG,IAAI,GACjExF,EAAIG,KAAKsG,MAAMtD,MAAMqC,EAAGjB,GACxBG,EAAIe,OAAOzF,EAAEwE,EAAGxE,EAAEuE,GAEtBG,EAAIgB,WAERhC,EAAY5D,UAAUmF,cAAgB,SAAUP,GACxCvE,KAAK+E,KAAKa,QACVrB,EAAIS,UAAYhF,KAAK+E,KAAKa,OAC1B5F,KAAK+E,KAAKc,QACVtB,EAAIuB,YAAc9F,KAAK+E,KAAKc,OAC5B7F,KAAK+E,KAAKqB,MACV7B,EAAII,YAAY3E,KAAK+E,KAAKqB,OAE3B7C,EA9GqB,GAgHhC1F,EAAQ0F,YAAcA,G,gBC/HtB,UAEI,EAAO,CAAC,QAAkB,0BAAP,EAUd,SAAUzF,GACjB,aAiBA,IAAI4K,EAAWjK,OAAO4J,QAAU,SAAUM,GACxC,IAAK,IAAI5K,EAAI,EAAGA,EAAI+I,UAAUzD,OAAQtF,IAAK,CACzC,IAAI6K,EAAS9B,UAAU/I,GAEvB,IAAK,IAAIuB,KAAOsJ,EACVnK,OAAOkB,UAAUC,eAAe1B,KAAK0K,EAAQtJ,KAC/CqJ,EAAOrJ,GAAOsJ,EAAOtJ,IAK3B,OAAOqJ,GAGT,SAASE,EAAmBC,GAC1B,GAAI5G,MAAMuF,QAAQqB,GAAM,CACtB,IAAK,IAAI/K,EAAI,EAAGgL,EAAO7G,MAAM4G,EAAIzF,QAAStF,EAAI+K,EAAIzF,OAAQtF,IACxDgL,EAAKhL,GAAK+K,EAAI/K,GAGhB,OAAOgL,EAEP,OAAO7G,MAAMC,KAAK2G,GAItB,IAAIE,EAAkB,CAAEC,MAAO,EAAG9C,UAAW,EAAG+C,OAAQ,MAWxD,SAASC,EAAyBxG,EAAMyG,GACtC,IAAIC,EAAc,GACdC,EAAe,GAEnB3G,EAAKpB,SAAQ,SAAUlD,EAAGN,GACX,OAATM,EAAE,KACJiL,EAAaC,KAAKlL,GAClBgL,EAAYE,KAAKH,EAAQrL,QAI7B,IAGIyL,EAHMF,EAAatB,QAAO,SAAUyB,EAAGC,GACzC,OAAOD,EAAIC,EAAY,KACtB,GACcJ,EAAajG,OAE1BsG,EAAOL,EAAatB,QAAO,SAAUyB,EAAGC,GAC1C,IAAIE,EAAaF,EAAY,GAAKF,EAClC,OAAOC,EAAIG,EAAaA,IACvB,GAQH,OAAO,EANGN,EAAatB,QAAO,SAAU6B,EAAOH,EAAavF,GAC1D,IAAI2F,EAAaT,EAAYlF,GACzB4F,EAAWL,EAAY,GAAKI,EAAW,GAC3C,OAAOD,EAAQE,EAAWA,IACzB,GAEcJ,EA4DnB,SAASK,EAAMC,EAAQ9D,GACrB,IAAI+D,EAASC,KAAKC,IAAI,GAAIjE,GAC1B,OAAOgE,KAAKH,MAAMC,EAASC,GAAUA,EAQvC,IAAIG,EAAU,CACZC,OAAQ,SAAgB3H,EAAMxB,GAI5B,IAHA,IAAIoJ,EAAM,CAAC,EAAG,EAAG,EAAG,EAAG,GACnBC,EAAM,EAEDhL,EAAI,EAAGA,EAAImD,EAAKU,OAAQ7D,IACZ,OAAfmD,EAAKnD,GAAG,KACVgL,IACAD,EAAI,IAAM5H,EAAKnD,GAAG,GAClB+K,EAAI,IAAM5H,EAAKnD,GAAG,GAClB+K,EAAI,IAAM5H,EAAKnD,GAAG,GAAKmD,EAAKnD,GAAG,GAC/B+K,EAAI,IAAM5H,EAAKnD,GAAG,GAAKmD,EAAKnD,GAAG,GAC/B+K,EAAI,IAAM5H,EAAKnD,GAAG,GAAKmD,EAAKnD,GAAG,IAInC,IAAIiL,EAAMD,EAAMD,EAAI,GAAKA,EAAI,GAAKA,EAAI,GAClCG,EAAOF,EAAMD,EAAI,GAAKA,EAAI,GAAKA,EAAI,GACnCI,EAAmB,IAARF,EAAY,EAAIT,EAAMU,EAAOD,EAAKtJ,EAAQgF,WACrDyE,EAAYZ,EAAMO,EAAI,GAAKC,EAAMG,EAAWJ,EAAI,GAAKC,EAAKrJ,EAAQgF,WAElEjB,EAAU,SAAiBb,GAC7B,MAAO,CAAC2F,EAAM3F,EAAGlD,EAAQgF,WAAY6D,EAAMW,EAAWtG,EAAIuG,EAAWzJ,EAAQgF,aAG3E3C,EAASb,EAAKW,KAAI,SAAUuH,GAC9B,OAAO3F,EAAQ2F,EAAM,OAGvB,MAAO,CACLrH,OAAQA,EACR0B,QAASA,EACT4F,SAAU,CAACH,EAAUC,GACrB1C,GAAI8B,EAAMb,EAAyBxG,EAAMa,GAASrC,EAAQgF,WAC1D4E,OAAsB,IAAdH,EAAkB,OAASD,EAAW,IAAM,OAASA,EAAW,OAASC,IAGrFI,YAAa,SAAqBrI,EAAMxB,GAGtC,IAFA,IAAIoJ,EAAM,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAEjB/K,EAAI,EAAGA,EAAImD,EAAKU,OAAQ7D,IACZ,OAAfmD,EAAKnD,GAAG,KACV+K,EAAI,IAAM5H,EAAKnD,GAAG,GAClB+K,EAAI,IAAM5H,EAAKnD,GAAG,GAClB+K,EAAI,IAAM5H,EAAKnD,GAAG,GAAKmD,EAAKnD,GAAG,GAAKmD,EAAKnD,GAAG,GAC5C+K,EAAI,IAAM5H,EAAKnD,GAAG,GAAK2K,KAAKc,IAAItI,EAAKnD,GAAG,IACxC+K,EAAI,IAAM5H,EAAKnD,GAAG,GAAKmD,EAAKnD,GAAG,GAAK2K,KAAKc,IAAItI,EAAKnD,GAAG,IACrD+K,EAAI,IAAM5H,EAAKnD,GAAG,GAAKmD,EAAKnD,GAAG,IAInC,IAAI0L,EAAcX,EAAI,GAAKA,EAAI,GAAKA,EAAI,GAAKA,EAAI,GAC7Cd,EAAIU,KAAKgB,KAAKZ,EAAI,GAAKA,EAAI,GAAKA,EAAI,GAAKA,EAAI,IAAMW,GACnDE,GAAKb,EAAI,GAAKA,EAAI,GAAKA,EAAI,GAAKA,EAAI,IAAMW,EAC1CG,EAASrB,EAAMP,EAAGtI,EAAQgF,WAC1BmF,EAAStB,EAAMoB,EAAGjK,EAAQgF,WAC1BjB,EAAU,SAAiBb,GAC7B,MAAO,CAAC2F,EAAM3F,EAAGlD,EAAQgF,WAAY6D,EAAMqB,EAASlB,KAAKgB,IAAIG,EAASjH,GAAIlD,EAAQgF,aAGhF3C,EAASb,EAAKW,KAAI,SAAUuH,GAC9B,OAAO3F,EAAQ2F,EAAM,OAGvB,MAAO,CACLrH,OAAQA,EACR0B,QAASA,EACT4F,SAAU,CAACO,EAAQC,GACnBP,OAAQ,OAASM,EAAS,MAAQC,EAAS,KAC3CpD,GAAI8B,EAAMb,EAAyBxG,EAAMa,GAASrC,EAAQgF,aAG9DoF,YAAa,SAAqB5I,EAAMxB,GAItC,IAHA,IAAIoJ,EAAM,CAAC,EAAG,EAAG,EAAG,GAChBC,EAAM7H,EAAKU,OAEN7D,EAAI,EAAGA,EAAIgL,EAAKhL,IACJ,OAAfmD,EAAKnD,GAAG,KACV+K,EAAI,IAAMJ,KAAKc,IAAItI,EAAKnD,GAAG,IAC3B+K,EAAI,IAAM5H,EAAKnD,GAAG,GAAK2K,KAAKc,IAAItI,EAAKnD,GAAG,IACxC+K,EAAI,IAAM5H,EAAKnD,GAAG,GAClB+K,EAAI,IAAMJ,KAAKC,IAAID,KAAKc,IAAItI,EAAKnD,GAAG,IAAK,IAI7C,IACI8L,EAAStB,GADJQ,EAAMD,EAAI,GAAKA,EAAI,GAAKA,EAAI,KAAOC,EAAMD,EAAI,GAAKA,EAAI,GAAKA,EAAI,IAClDpJ,EAAQgF,WAC1BkF,EAASrB,GAAOO,EAAI,GAAKe,EAASf,EAAI,IAAMC,EAAKrJ,EAAQgF,WAEzDjB,EAAU,SAAiBb,GAC7B,MAAO,CAAC2F,EAAM3F,EAAGlD,EAAQgF,WAAY6D,EAAMA,EAAMqB,EAASC,EAASnB,KAAKc,IAAI5G,GAAIlD,EAAQgF,WAAYhF,EAAQgF,aAG1G3C,EAASb,EAAKW,KAAI,SAAUuH,GAC9B,OAAO3F,EAAQ2F,EAAM,OAGvB,MAAO,CACLrH,OAAQA,EACR0B,QAASA,EACT4F,SAAU,CAACO,EAAQC,GACnBP,OAAQ,OAASM,EAAS,MAAQC,EAAS,SAC3CpD,GAAI8B,EAAMb,EAAyBxG,EAAMa,GAASrC,EAAQgF,aAG9DqF,MAAO,SAAe7I,EAAMxB,GAI1B,IAHA,IAAIoJ,EAAM,CAAC,EAAG,EAAG,EAAG,EAAG,GACnBC,EAAM7H,EAAKU,OAEN7D,EAAI,EAAGA,EAAIgL,EAAKhL,IACJ,OAAfmD,EAAKnD,GAAG,KACV+K,EAAI,IAAMJ,KAAKc,IAAItI,EAAKnD,GAAG,IAC3B+K,EAAI,IAAMJ,KAAKc,IAAItI,EAAKnD,GAAG,IAAM2K,KAAKc,IAAItI,EAAKnD,GAAG,IAClD+K,EAAI,IAAMJ,KAAKc,IAAItI,EAAKnD,GAAG,IAC3B+K,EAAI,IAAMJ,KAAKC,IAAID,KAAKc,IAAItI,EAAKnD,GAAG,IAAK,IAI7C,IAAI4L,GAAKZ,EAAMD,EAAI,GAAKA,EAAI,GAAKA,EAAI,KAAOC,EAAMD,EAAI,GAAKJ,KAAKC,IAAIG,EAAI,GAAI,IACxEd,GAAKc,EAAI,GAAKa,EAAIb,EAAI,IAAMC,EAC5Ba,EAASrB,EAAMG,KAAKgB,IAAI1B,GAAItI,EAAQgF,WACpCmF,EAAStB,EAAMoB,EAAGjK,EAAQgF,WAE1BjB,EAAU,SAAiBb,GAC7B,MAAO,CAAC2F,EAAM3F,EAAGlD,EAAQgF,WAAY6D,EAAMA,EAAMqB,EAASlB,KAAKC,IAAI/F,EAAGiH,GAASnK,EAAQgF,WAAYhF,EAAQgF,aAGzG3C,EAASb,EAAKW,KAAI,SAAUuH,GAC9B,OAAO3F,EAAQ2F,EAAM,OAGvB,MAAO,CACLrH,OAAQA,EACR0B,QAASA,EACT4F,SAAU,CAACO,EAAQC,GACnBP,OAAQ,OAASM,EAAS,KAAOC,EACjCpD,GAAI8B,EAAMb,EAAyBxG,EAAMa,GAASrC,EAAQgF,aAG9DsF,WAAY,SAAoB9I,EAAMxB,GAQpC,IAPA,IAAIuK,EAAM,GACNC,EAAM,GACNlC,EAAI,EACJ2B,EAAI,EACJZ,EAAM7H,EAAKU,OACXpD,EAAIkB,EAAQ8H,MAAQ,EAEflL,EAAI,EAAGA,EAAIkC,EAAGlC,IAAK,CAC1B,IAAK,IAAIC,EAAI,EAAGA,EAAIwM,EAAKxM,IACJ,OAAf2E,EAAK3E,GAAG,KACVyL,GAAKU,KAAKC,IAAIzH,EAAK3E,GAAG,GAAID,GAAK4E,EAAK3E,GAAG,IAI3C0N,EAAInC,KAAKE,GACTA,EAAI,EAGJ,IADA,IAAIrL,EAAI,GACCiH,EAAI,EAAGA,EAAIpF,EAAGoF,IAAK,CAC1B,IAAK,IAAIuG,EAAK,EAAGA,EAAKpB,EAAKoB,IACL,OAAhBjJ,EAAKiJ,GAAI,KACXR,GAAKjB,KAAKC,IAAIzH,EAAKiJ,GAAI,GAAI7N,EAAIsH,IAGnCjH,EAAEmL,KAAK6B,GACPA,EAAI,EAENO,EAAIpC,KAAKnL,GAEXuN,EAAIpC,KAAKmC,GAiBT,IAfA,IAAIG,EArOR,SAA6BC,EAAO7C,GAKlC,IAJA,IAAI8C,EAASD,EACTtM,EAAIsM,EAAMzI,OAAS,EACnBwI,EAAe,CAAC5C,GAEXlL,EAAI,EAAGA,EAAIyB,EAAGzB,IAAK,CAE1B,IADA,IAAIiO,EAASjO,EACJsH,EAAItH,EAAI,EAAGsH,EAAI7F,EAAG6F,IACrB8E,KAAK8B,IAAIF,EAAOhO,GAAGsH,IAAM8E,KAAK8B,IAAIF,EAAOhO,GAAGiO,MAC9CA,EAAS3G,GAIb,IAAK,IAAIpF,EAAIlC,EAAGkC,EAAIT,EAAI,EAAGS,IAAK,CAC9B,IAAIiM,EAAMH,EAAO9L,GAAGlC,GACpBgO,EAAO9L,GAAGlC,GAAKgO,EAAO9L,GAAG+L,GACzBD,EAAO9L,GAAG+L,GAAUE,EAGtB,IAAK,IAAIC,EAAKpO,EAAI,EAAGoO,EAAK3M,EAAG2M,IAC3B,IAAK,IAAIC,EAAK5M,EAAG4M,GAAMrO,EAAGqO,IACxBL,EAAOK,GAAID,IAAOJ,EAAOK,GAAIrO,GAAKgO,EAAOhO,GAAGoO,GAAMJ,EAAOhO,GAAGA,GAKlE,IAAK,IAAIsO,EAAM7M,EAAI,EAAG6M,GAAO,EAAGA,IAAO,CAErC,IADA,IAAIC,EAAQ,EACHC,EAAMF,EAAM,EAAGE,EAAM/M,EAAG+M,IAC/BD,GAASP,EAAOQ,GAAKF,GAAOR,EAAaU,GAG3CV,EAAaQ,IAAQN,EAAOvM,GAAG6M,GAAOC,GAASP,EAAOM,GAAKA,GAG7D,OAAOR,EAkMcW,CAAoBb,EAAK1L,GAAGqD,KAAI,SAAUG,GAC3D,OAAOuG,EAAMvG,EAAGtC,EAAQgF,cAGtBjB,EAAU,SAAiBb,GAC7B,MAAO,CAAC2F,EAAM3F,EAAGlD,EAAQgF,WAAY6D,EAAM6B,EAAa7D,QAAO,SAAUuC,EAAKkC,EAAOjB,GACnF,OAAOjB,EAAMkC,EAAQtC,KAAKC,IAAI/F,EAAGmH,KAChC,GAAIrK,EAAQgF,aAGb3C,EAASb,EAAKW,KAAI,SAAUuH,GAC9B,OAAO3F,EAAQ2F,EAAM,OAGnBE,EAAS,OACJlE,EAAKgF,EAAaxI,OAAS,EAAGwD,GAAM,EAAGA,IAE5CkE,GADElE,EAAK,EACGgF,EAAahF,GAAM,KAAOA,EAAK,MACzB,IAAPA,EACCgF,EAAahF,GAAM,OAEnBgF,EAAahF,GAI3B,MAAO,CACLkE,OAAQA,EACRvH,OAAQA,EACR0B,QAASA,EACT4F,SAAU,GAAG4B,OAAO7D,EAAmBgD,IAAec,UACtDzE,GAAI8B,EAAMb,EAAyBxG,EAAMa,GAASrC,EAAQgF,cAiBhErI,EAAOD,QAHEY,OAAO2D,KAAKiI,GAASrC,QARf,SAAgB4E,EAAatO,GACxC,OAAOoK,EAAS,CACdmE,OAAQ7C,GACP4C,GAvW4B5N,EAuWW,SAAU2D,EAAMmK,GACxD,OAAOzC,EAAQ/L,GAAMqE,EAAM+F,EAAS,GAAIM,EAAiB8D,MAxWjCxN,EAuWUhB,KAvWf8I,EAuWW,IArWhC3I,OAAOC,eAAe0I,EAAK9H,EAAK,CAC9BN,MAAOA,EACPL,YAAY,EACZoO,cAAc,EACdC,UAAU,IAGZ5F,EAAI9H,GAAON,EAGNoI,IAZT,IAAyBA,EAAK9H,EAAKN,IA4WU,MAzXjB,gC,6BCD9BP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,IACtDnB,EAAQwJ,cAAW,EAqBnBxJ,EAAQwJ,SAdR,SAASA,EAASuB,EAAQ7B,GACtB,IAAI4B,EAASC,EACb,GAAIA,IAA6B,iBAAXA,GAAuB1G,MAAMuF,QAAQmB,IAAU,CACjE,GAAIA,aAAkBqE,KAClB,OAAO,IAAIA,KAAKrE,EAAOsE,WAE3B,GADAvE,EAAUzG,MAAMuF,QAAQmB,GAAU,GAAK,GAClC7B,EAIDA,EAAOxF,SAAQ,SAAU4L,GAAS,OAAOxE,EAAOwE,GAAS9F,EAASuB,EAAOuE,YAHzE,IAAK,IAAIA,KAASvE,EACdD,EAAOwE,GAAS9F,EAASuB,EAAOuE,IAI5C,OAAOxE","file":"chartjs-plugin-regression.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./regression-plugin\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ChartRegressions = void 0;\nvar MetaData_1 = require(\"./MetaData\");\nvar Plugin = /** @class */ (function () {\n    function Plugin() {\n        this.id = 'regressions';\n        this._chartId = 0;\n        this._metadataMap = new Map();\n    }\n    Plugin.prototype.beforeInit = function (chart) {\n        chart.$$id = ++this._chartId;\n    };\n    /**\n     * Called after update (when the chart is created and when chart.update() is called)\n     * @param chart\n     */\n    Plugin.prototype.beforeUpdate = function (chart) {\n        var _this = this;\n        var o, p, r;\n        var onComplete = (o = chart.config.options) && (p = o.plugins)\n            && (r = p.regressions) && r.onCompleteCalculation;\n        forEach(chart, function (ds, meta, datasetIndex) {\n            meta = new MetaData_1.MetaDataSet(chart, ds);\n            var id = chart.$$id * 1000 + datasetIndex;\n            _this._metadataMap.set(id, meta);\n        });\n        if (onComplete)\n            onComplete(chart);\n    };\n    /**\n     * It's called once before all the drawing\n     * @param chart\n     */\n    Plugin.prototype.beforeRender = function (chart) {\n        forEach(chart, function (ds, meta) { return meta.adjustScales(); });\n    };\n    Plugin.prototype.afterDatasetsDraw = function (chart) {\n        forEach(chart, function (ds, meta) { return meta.draw(); });\n    };\n    Plugin.prototype.destroy = function (chart) {\n        var _this = this;\n        Array.from(this._metadataMap.keys())\n            .filter(function (k) { return (k / 1000) >> 0 == chart.$$id; })\n            .forEach(function (k) { return _this._metadataMap.delete(k); });\n    };\n    /** Get dataset's meta data */\n    Plugin.prototype.getDataset = function (chart, datasetIndex) {\n        var id = chart.$$id * 1000 + datasetIndex;\n        return this._metadataMap.get(id);\n    };\n    /** Get dataset's meta sections */\n    Plugin.prototype.getSections = function (chart, datasetIndex) {\n        var ds = this.getDataset(chart, datasetIndex);\n        return ds && ds.sections;\n    };\n    return Plugin;\n}());\nfunction forEach(chart, fn) {\n    chart.data.datasets.forEach(function (ds, i) {\n        if (ds.regressions && chart.isDatasetVisible(i)) {\n            var meta = exports.ChartRegressions.getDataset(chart, i);\n            fn(ds, meta, i);\n        }\n    });\n}\nexports.ChartRegressions = new Plugin();\nwindow.ChartRegressions = exports.ChartRegressions;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MetaDataSet = void 0;\nvar MetaSection_1 = require(\"./MetaSection\");\nvar MetaDataSet = /** @class */ (function () {\n    function MetaDataSet(chart, ds) {\n        var _this = this;\n        /** Scales wil be initialized in beforeDraw hook */\n        this.getXY = undefined;\n        var cfg = ds.regressions;\n        var me = this;\n        this.chart = chart;\n        this.dataset = ds;\n        this.sections = (cfg.sections || [{ startIndex: 0, endIndex: ds.data.length - 1 }])\n            .map(function (s) { return new MetaSection_1.MetaSection(s, _this); });\n        this.points = ds.data.map(function (v, i) { return [i, !i ? null : !v ? null : v]; });\n        me.sections.forEach(function (section) { return section.calculate(ds, _this); }); // Calculate Section Results\n    }\n    MetaDataSet.prototype.adjustScales = function () {\n        if (this.topY !== undefined)\n            return;\n        var xScale;\n        var yScale;\n        var scales = this.chart.scales;\n        Object.keys(scales).forEach(function (k) { return k[0] == 'x' && (xScale = scales[k]) || (yScale = scales[k]); });\n        this.topY = yScale.top;\n        this.bottomY = yScale.bottom;\n        this.getXY =\n            function (index, y) {\n                return ({\n                    x: xScale.getPixelForValue(undefined, index, undefined, true),\n                    y: yScale.getPixelForValue(y)\n                });\n            };\n    };\n    MetaDataSet.prototype.draw = function () {\n        var ctx = this.chart.chart.ctx;\n        var me = this;\n        ctx.save();\n        try {\n            if (this.dataset.regressions.extendPredictions)\n                _drawPredictions();\n            for (var i = 0; i < this.sections.length; i++) {\n                var section = this.sections[i];\n                section.drawRegression(ctx);\n                if (i < this.sections.length - 1)\n                    section.drawVerticalLine(ctx);\n            }\n        }\n        finally {\n            ctx.restore();\n        }\n        return;\n        /**\n         * Draws the previous sections predictions as a dashed thin line\n         */\n        function _drawPredictions() {\n            ctx.setLineDash([5, 5]);\n            for (var i = 1; i < me.sections.length; i++) {\n                var section = me.sections[i];\n                var _loop_1 = function (r) {\n                    ctx.beginPath();\n                    _setLineAttrs(me.sections[r].line);\n                    ctx.lineWidth = 1; // overrides the width to a thin line\n                    var fn = me.sections[r].result.predict;\n                    var calcXY = function (index) { return me.getXY(index, fn(index)[1]); };\n                    var p = calcXY(section.startIndex);\n                    ctx.moveTo(p.x, p.y);\n                    for (var j = section.startIndex + 1; j < section.endIndex + 1; j++) {\n                        p = calcXY(j);\n                        ctx.lineTo(p.x, p.y);\n                    }\n                    ctx.stroke();\n                };\n                for (var r = 0; r < i; r++) {\n                    _loop_1(r);\n                }\n            }\n        }\n        function _setLineAttrs(line) {\n            if (line.width)\n                ctx.lineWidth = line.width;\n            if (line.color)\n                ctx.strokeStyle = line.color;\n        }\n    };\n    return MetaDataSet;\n}());\nexports.MetaDataSet = MetaDataSet;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MetaSection = void 0;\nvar regression = require(\"regression\");\nvar tools_1 = require(\"./tools\");\nvar defaultOptions = {\n    type: \"linear\",\n    precision: 2,\n    line: {\n        width: 2,\n        color: '#000',\n        dash: []\n    },\n    extendPredictions: false\n};\nvar MetaSection = /** @class */ (function () {\n    function MetaSection(sec, _meta) {\n        this._meta = _meta;\n        var chart = _meta.chart;\n        var ds = _meta.dataset;\n        // Copying from user config\n        this.startIndex = sec.startIndex;\n        this.endIndex = sec.endIndex;\n        this.copySectionIndex = sec.copySectionIndex;\n        this.copyOverData = sec.copyOverData;\n        // Calculate inherited configuration \n        var globalOpts = getGlobalOptions();\n        var cfg = simpleMerge('type,precision,extendPredictions', defaultOptions, globalOpts, ds.regressions, sec);\n        this.line = simpleMerge('color,width,dash', defaultOptions.line, globalOpts.line, ds.regressions.line, sec.line);\n        this.type = Array.isArray(cfg.type) ? cfg.type : [cfg.type];\n        this._regressionOptions = { precision: cfg.precision || 2 };\n        this.extendPredictions = cfg.extendPredictions;\n        validate(this.type);\n        // --- constructor helpers\n        function getGlobalOptions() {\n            var o, p;\n            return (o = chart.config.options) && (p = o.plugins) && p.regressions || {};\n        }\n        function validate(type) {\n            if (type.length > 1 && type.includes('copy'))\n                throw Error('Invalid regression type:' + cfg.type + '. \"none\" cannot be combined with other type!');\n        }\n        function simpleMerge(fieldNames) {\n            var objs = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                objs[_i - 1] = arguments[_i];\n            }\n            var fields = fieldNames.split(',');\n            var ret = {};\n            for (var _a = 0, objs_1 = objs; _a < objs_1.length; _a++) {\n                var obj = objs_1[_a];\n                if (!obj)\n                    continue;\n                var o = tools_1.deepCopy(obj, fields);\n                for (var _b = 0, fields_1 = fields; _b < fields_1.length; _b++) {\n                    var f = fields_1[_b];\n                    if (typeof o[f] != 'undefined')\n                        ret[f] = o[f];\n                }\n            }\n            ;\n            return ret;\n        }\n    }\n    MetaSection.prototype.calculate = function (ds, meta) {\n        var _this = this;\n        var sectionData = meta.points.slice(this.startIndex, this.endIndex + 1);\n        if (this.type[0] != 'copy') {\n            this.result = this.type.reduce(function (max, type) {\n                var r = regression[type](sectionData, _this._regressionOptions);\n                r.type = type;\n                return (!max || max.r2 < r.r2) ? r : max;\n            }, null);\n        }\n        else if (this.copySectionIndex) {\n            var from_1 = meta.sections[this.copySectionIndex], r_1 = this.result = Object.assign({}, from_1.result), overwrite_1 = this.copyOverData, data_1 = ds.data;\n            r_1.points = sectionData.map(function (p) { return r_1.predict(p[0]); });\n            delete r_1.r2;\n            r_1.points.forEach(function (_a) {\n                var index = _a[0], value = _a[1];\n                if ((index < from_1.startIndex || index > from_1.endIndex) &&\n                    (overwrite_1 == 'all' ||\n                        overwrite_1 == 'last' && index == _this.endIndex ||\n                        overwrite_1 == 'empty' && !data_1[index]))\n                    data_1[index] = value;\n            });\n        }\n    };\n    MetaSection.prototype.drawVerticalLine = function (ctx) {\n        ctx.beginPath();\n        this._setLineAttrs(ctx);\n        ctx.setLineDash([10, 2]);\n        ctx.lineWidth = 2;\n        // Print vertical line\n        var p = this._meta.getXY(this.endIndex, 0);\n        ctx.moveTo(p.x, this._meta.topY);\n        ctx.lineTo(p.x, this._meta.bottomY);\n        // ctx.fillText(xScale.getLabelForIndex(this.end), p.x, yScale.top);\n        ctx.fillText(this._meta.chart.data.labels[this.endIndex], p.x, this._meta.topY);\n        ctx.stroke();\n    };\n    MetaSection.prototype.drawRegression = function (ctx) {\n        ctx.beginPath();\n        this._setLineAttrs(ctx);\n        var points = this.result.points;\n        if (!points.length)\n            return;\n        var p = this._meta.getXY(this.startIndex, points[0][1]);\n        ctx.moveTo(p.x, p.y);\n        for (var k = 1, j = this.startIndex + 1; j <= this.endIndex; j++, k++) {\n            // const y = this.result!.predict(j)[1];\n            var y = (k < points.length ? points[k] : this.result.predict(j))[1];\n            p = this._meta.getXY(j, y);\n            ctx.lineTo(p.x, p.y);\n        }\n        ctx.stroke();\n    };\n    MetaSection.prototype._setLineAttrs = function (ctx) {\n        if (this.line.width)\n            ctx.lineWidth = this.line.width;\n        if (this.line.color)\n            ctx.strokeStyle = this.line.color;\n        if (this.line.dash)\n            ctx.setLineDash(this.line.dash);\n    };\n    return MetaSection;\n}());\nexports.MetaSection = MetaSection;\n","(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define(['module'], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(module);\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod);\n    global.regression = mod.exports;\n  }\n})(this, function (module) {\n  'use strict';\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  var _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  function _toConsumableArray(arr) {\n    if (Array.isArray(arr)) {\n      for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n        arr2[i] = arr[i];\n      }\n\n      return arr2;\n    } else {\n      return Array.from(arr);\n    }\n  }\n\n  var DEFAULT_OPTIONS = { order: 2, precision: 2, period: null };\n\n  /**\n  * Determine the coefficient of determination (r^2) of a fit from the observations\n  * and predictions.\n  *\n  * @param {Array<Array<number>>} data - Pairs of observed x-y values\n  * @param {Array<Array<number>>} results - Pairs of observed predicted x-y values\n  *\n  * @return {number} - The r^2 value, or NaN if one cannot be calculated.\n  */\n  function determinationCoefficient(data, results) {\n    var predictions = [];\n    var observations = [];\n\n    data.forEach(function (d, i) {\n      if (d[1] !== null) {\n        observations.push(d);\n        predictions.push(results[i]);\n      }\n    });\n\n    var sum = observations.reduce(function (a, observation) {\n      return a + observation[1];\n    }, 0);\n    var mean = sum / observations.length;\n\n    var ssyy = observations.reduce(function (a, observation) {\n      var difference = observation[1] - mean;\n      return a + difference * difference;\n    }, 0);\n\n    var sse = observations.reduce(function (accum, observation, index) {\n      var prediction = predictions[index];\n      var residual = observation[1] - prediction[1];\n      return accum + residual * residual;\n    }, 0);\n\n    return 1 - sse / ssyy;\n  }\n\n  /**\n  * Determine the solution of a system of linear equations A * x = b using\n  * Gaussian elimination.\n  *\n  * @param {Array<Array<number>>} input - A 2-d matrix of data in row-major form [ A | b ]\n  * @param {number} order - How many degrees to solve for\n  *\n  * @return {Array<number>} - Vector of normalized solution coefficients matrix (x)\n  */\n  function gaussianElimination(input, order) {\n    var matrix = input;\n    var n = input.length - 1;\n    var coefficients = [order];\n\n    for (var i = 0; i < n; i++) {\n      var maxrow = i;\n      for (var j = i + 1; j < n; j++) {\n        if (Math.abs(matrix[i][j]) > Math.abs(matrix[i][maxrow])) {\n          maxrow = j;\n        }\n      }\n\n      for (var k = i; k < n + 1; k++) {\n        var tmp = matrix[k][i];\n        matrix[k][i] = matrix[k][maxrow];\n        matrix[k][maxrow] = tmp;\n      }\n\n      for (var _j = i + 1; _j < n; _j++) {\n        for (var _k = n; _k >= i; _k--) {\n          matrix[_k][_j] -= matrix[_k][i] * matrix[i][_j] / matrix[i][i];\n        }\n      }\n    }\n\n    for (var _j2 = n - 1; _j2 >= 0; _j2--) {\n      var total = 0;\n      for (var _k2 = _j2 + 1; _k2 < n; _k2++) {\n        total += matrix[_k2][_j2] * coefficients[_k2];\n      }\n\n      coefficients[_j2] = (matrix[n][_j2] - total) / matrix[_j2][_j2];\n    }\n\n    return coefficients;\n  }\n\n  /**\n  * Round a number to a precision, specificed in number of decimal places\n  *\n  * @param {number} number - The number to round\n  * @param {number} precision - The number of decimal places to round to:\n  *                             > 0 means decimals, < 0 means powers of 10\n  *\n  *\n  * @return {numbr} - The number, rounded\n  */\n  function round(number, precision) {\n    var factor = Math.pow(10, precision);\n    return Math.round(number * factor) / factor;\n  }\n\n  /**\n  * The set of all fitting methods\n  *\n  * @namespace\n  */\n  var methods = {\n    linear: function linear(data, options) {\n      var sum = [0, 0, 0, 0, 0];\n      var len = 0;\n\n      for (var n = 0; n < data.length; n++) {\n        if (data[n][1] !== null) {\n          len++;\n          sum[0] += data[n][0];\n          sum[1] += data[n][1];\n          sum[2] += data[n][0] * data[n][0];\n          sum[3] += data[n][0] * data[n][1];\n          sum[4] += data[n][1] * data[n][1];\n        }\n      }\n\n      var run = len * sum[2] - sum[0] * sum[0];\n      var rise = len * sum[3] - sum[0] * sum[1];\n      var gradient = run === 0 ? 0 : round(rise / run, options.precision);\n      var intercept = round(sum[1] / len - gradient * sum[0] / len, options.precision);\n\n      var predict = function predict(x) {\n        return [round(x, options.precision), round(gradient * x + intercept, options.precision)];\n      };\n\n      var points = data.map(function (point) {\n        return predict(point[0]);\n      });\n\n      return {\n        points: points,\n        predict: predict,\n        equation: [gradient, intercept],\n        r2: round(determinationCoefficient(data, points), options.precision),\n        string: intercept === 0 ? 'y = ' + gradient + 'x' : 'y = ' + gradient + 'x + ' + intercept\n      };\n    },\n    exponential: function exponential(data, options) {\n      var sum = [0, 0, 0, 0, 0, 0];\n\n      for (var n = 0; n < data.length; n++) {\n        if (data[n][1] !== null) {\n          sum[0] += data[n][0];\n          sum[1] += data[n][1];\n          sum[2] += data[n][0] * data[n][0] * data[n][1];\n          sum[3] += data[n][1] * Math.log(data[n][1]);\n          sum[4] += data[n][0] * data[n][1] * Math.log(data[n][1]);\n          sum[5] += data[n][0] * data[n][1];\n        }\n      }\n\n      var denominator = sum[1] * sum[2] - sum[5] * sum[5];\n      var a = Math.exp((sum[2] * sum[3] - sum[5] * sum[4]) / denominator);\n      var b = (sum[1] * sum[4] - sum[5] * sum[3]) / denominator;\n      var coeffA = round(a, options.precision);\n      var coeffB = round(b, options.precision);\n      var predict = function predict(x) {\n        return [round(x, options.precision), round(coeffA * Math.exp(coeffB * x), options.precision)];\n      };\n\n      var points = data.map(function (point) {\n        return predict(point[0]);\n      });\n\n      return {\n        points: points,\n        predict: predict,\n        equation: [coeffA, coeffB],\n        string: 'y = ' + coeffA + 'e^(' + coeffB + 'x)',\n        r2: round(determinationCoefficient(data, points), options.precision)\n      };\n    },\n    logarithmic: function logarithmic(data, options) {\n      var sum = [0, 0, 0, 0];\n      var len = data.length;\n\n      for (var n = 0; n < len; n++) {\n        if (data[n][1] !== null) {\n          sum[0] += Math.log(data[n][0]);\n          sum[1] += data[n][1] * Math.log(data[n][0]);\n          sum[2] += data[n][1];\n          sum[3] += Math.pow(Math.log(data[n][0]), 2);\n        }\n      }\n\n      var a = (len * sum[1] - sum[2] * sum[0]) / (len * sum[3] - sum[0] * sum[0]);\n      var coeffB = round(a, options.precision);\n      var coeffA = round((sum[2] - coeffB * sum[0]) / len, options.precision);\n\n      var predict = function predict(x) {\n        return [round(x, options.precision), round(round(coeffA + coeffB * Math.log(x), options.precision), options.precision)];\n      };\n\n      var points = data.map(function (point) {\n        return predict(point[0]);\n      });\n\n      return {\n        points: points,\n        predict: predict,\n        equation: [coeffA, coeffB],\n        string: 'y = ' + coeffA + ' + ' + coeffB + ' ln(x)',\n        r2: round(determinationCoefficient(data, points), options.precision)\n      };\n    },\n    power: function power(data, options) {\n      var sum = [0, 0, 0, 0, 0];\n      var len = data.length;\n\n      for (var n = 0; n < len; n++) {\n        if (data[n][1] !== null) {\n          sum[0] += Math.log(data[n][0]);\n          sum[1] += Math.log(data[n][1]) * Math.log(data[n][0]);\n          sum[2] += Math.log(data[n][1]);\n          sum[3] += Math.pow(Math.log(data[n][0]), 2);\n        }\n      }\n\n      var b = (len * sum[1] - sum[0] * sum[2]) / (len * sum[3] - Math.pow(sum[0], 2));\n      var a = (sum[2] - b * sum[0]) / len;\n      var coeffA = round(Math.exp(a), options.precision);\n      var coeffB = round(b, options.precision);\n\n      var predict = function predict(x) {\n        return [round(x, options.precision), round(round(coeffA * Math.pow(x, coeffB), options.precision), options.precision)];\n      };\n\n      var points = data.map(function (point) {\n        return predict(point[0]);\n      });\n\n      return {\n        points: points,\n        predict: predict,\n        equation: [coeffA, coeffB],\n        string: 'y = ' + coeffA + 'x^' + coeffB,\n        r2: round(determinationCoefficient(data, points), options.precision)\n      };\n    },\n    polynomial: function polynomial(data, options) {\n      var lhs = [];\n      var rhs = [];\n      var a = 0;\n      var b = 0;\n      var len = data.length;\n      var k = options.order + 1;\n\n      for (var i = 0; i < k; i++) {\n        for (var l = 0; l < len; l++) {\n          if (data[l][1] !== null) {\n            a += Math.pow(data[l][0], i) * data[l][1];\n          }\n        }\n\n        lhs.push(a);\n        a = 0;\n\n        var c = [];\n        for (var j = 0; j < k; j++) {\n          for (var _l = 0; _l < len; _l++) {\n            if (data[_l][1] !== null) {\n              b += Math.pow(data[_l][0], i + j);\n            }\n          }\n          c.push(b);\n          b = 0;\n        }\n        rhs.push(c);\n      }\n      rhs.push(lhs);\n\n      var coefficients = gaussianElimination(rhs, k).map(function (v) {\n        return round(v, options.precision);\n      });\n\n      var predict = function predict(x) {\n        return [round(x, options.precision), round(coefficients.reduce(function (sum, coeff, power) {\n          return sum + coeff * Math.pow(x, power);\n        }, 0), options.precision)];\n      };\n\n      var points = data.map(function (point) {\n        return predict(point[0]);\n      });\n\n      var string = 'y = ';\n      for (var _i = coefficients.length - 1; _i >= 0; _i--) {\n        if (_i > 1) {\n          string += coefficients[_i] + 'x^' + _i + ' + ';\n        } else if (_i === 1) {\n          string += coefficients[_i] + 'x + ';\n        } else {\n          string += coefficients[_i];\n        }\n      }\n\n      return {\n        string: string,\n        points: points,\n        predict: predict,\n        equation: [].concat(_toConsumableArray(coefficients)).reverse(),\n        r2: round(determinationCoefficient(data, points), options.precision)\n      };\n    }\n  };\n\n  function createWrapper() {\n    var reduce = function reduce(accumulator, name) {\n      return _extends({\n        _round: round\n      }, accumulator, _defineProperty({}, name, function (data, supplied) {\n        return methods[name](data, _extends({}, DEFAULT_OPTIONS, supplied));\n      }));\n    };\n\n    return Object.keys(methods).reduce(reduce, {});\n  }\n\n  module.exports = createWrapper();\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.deepCopy = void 0;\n/**\n * Makes a deep copy of the object including a copy of all the children and so on.\n * @param source source object. It can be any type\n * @param fields list of root fields that should be copied. If not sent, it will copy all the fields.\n * Note: the fields only filters the children of the source not the grandchildren.\n */\nfunction deepCopy(source, fields) {\n    var target = source;\n    if (source && (typeof source === 'object' || Array.isArray(source))) {\n        if (source instanceof Date)\n            return new Date(source.getTime());\n        target = (Array.isArray(source) ? [] : {});\n        if (!fields)\n            for (var field in source)\n                target[field] = deepCopy(source[field]);\n        else\n            fields.forEach(function (field) { return target[field] = deepCopy(source[field]); });\n    }\n    return target;\n}\nexports.deepCopy = deepCopy;\n"],"sourceRoot":""}